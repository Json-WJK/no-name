(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2c64"],{"2H6p":function(t,e,s){},"2rhy":function(t,e,s){"use strict";s.d(e,"g",function(){return o}),s.d(e,"b",function(){return r}),s.d(e,"a",function(){return a}),s.d(e,"j",function(){return n}),s.d(e,"c",function(){return l}),s.d(e,"i",function(){return c}),s.d(e,"f",function(){return u}),s.d(e,"e",function(){return d}),s.d(e,"h",function(){return m}),s.d(e,"d",function(){return f});var i=s("t3Un");function o(t){return Object(i.a)({url:"/sys/business/shopActivity/getShopActivityList",method:"post",data:t})}function r(t){return Object(i.a)({url:"/sys/business/shopActivity/calculatedActivityDiscount",method:"post",data:t})}function a(t){return Object(i.a)({url:"/sys/business/shopActivity/addShopActivity",method:"post",data:t})}function n(t){return Object(i.a)({url:"/sys/business/shopActivity/updateShopActivity",method:"post",data:t})}function l(t){return Object(i.a)({url:"/sys/business/shopActivity/deleteShopActivity",method:"post",data:t})}function c(t){return Object(i.a)({url:"/sys/business/shopActivity/invalidShopActivity",method:"post",data:t})}function u(t){return Object(i.a)({url:"/sys/business/shopActivity/getShopActivityById",method:"post",data:t})}function d(t){return Object(i.a)({url:"/sys/business/shopActivity/getActivityProductListById",method:"post",data:t})}function m(t){return Object(i.a)({url:"/sys/business/shopActivity/getShopActivityListById",method:"post",data:t})}function f(t){return Object(i.a)({url:"/product/mall/active/findActiveAndProduct?activeId="+t.activeId+"&productIds="+t.ids,method:"get"})}},HkPx:function(t,e,s){"use strict";s.r(e);var i=s("QbLZ"),o=s.n(i),r=s("L2JU"),a=s("2rhy"),n={data:function(){return{area:"",areaItem:[{AreaName:"抹去角和分",type:1},{AreaName:"抹去分",type:2}],form:{time:[],calculateType:0},commodityList:[]}},created:function(){this.getData()},methods:{getData:function(){var t=this;Object(a.f)({id:this.$route.query.id}).then(function(e){console.log("活动详情",e),200==e.code?(t.form=e.data,t.form.time=[e.data.beginActivityTime,e.data.endActivityTime],1==e.data.calculateType&&(t.area="抹去角和分"),2==e.data.calculateType&&(t.area="抹去分")):t.$message.error(e.message)})},back:function(){this.$router.push({path:"/marketManage/discount"})},itemBlur:function(t){if(t.row.discount){var e={calculateType:this.form.calculateType,productList:[{discount:t.row.discount,id:t.row.productId}]};this.getPrice(e,t.$index)}},subForm:function(){var t=this;if(console.log("请求的数据",this.form),this.form.name)if(0!=this.form.time.length)if(this.form.beginTime=this.form.time[0],this.form.endTime=this.form.time[1],void 0!=this.form.limitNumber)if(0!=this.commodityList.length){var e=this.commodityList.filter(function(t){return!t.discount});e.length>0?this.$message.error("列表中存在不完整数据"):(this.subLoading=!0,this.form.productList=this.commodityList,this.form.shopId=this.shop.shopId,console.log("errArr",e),addShopActivity(this.form).then(function(e){console.log("新建活动",e),200==e.code?(t.$message({message:e.message,type:"success"}),setTimeout(function(){t.subLoading=!1,t.$router.replace({path:"/marketManage/discount"})},1e3)):(t.subLoading=!1,t.$message.error(e.message))}))}else this.$message.error("请添加参加活动的商品");else this.$message.error("请输入限购数");else this.$message.error("请设置活动时间");else this.$message.error("请输入活动名称")},getRowClassName:function(t){var e=t.row;t.rowIndex;if(0==e.skuType)return"row-expand-cover"}},computed:o()({},Object(r.c)(["user","shop"]))},l=(s("IcQE"),s("bgBq"),s("KHd+")),c=Object(l.a)(n,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pageContent"},[s("el-card",{staticStyle:{"margin-bottom":"20px"},attrs:{shadow:"always"}},[s("div",{staticClass:"pageHead"},[t._v("活动基本信息")]),t._v(" "),s("el-form",{ref:"form",attrs:{model:t.form,"label-width":"140px"}},[s("el-form-item",{attrs:{label:"活动名称："}},[s("div",[t._v(t._s(t.form.name))])]),t._v(" "),s("el-form-item",{attrs:{label:"活动时间："}},[s("el-date-picker",{attrs:{disabled:"","value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.form.time,callback:function(e){t.$set(t.form,"time",e)},expression:"form.time"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"重要提醒："}},[s("div",[t._v("限时折扣活动与砍价活动互斥")])]),t._v(" "),s("el-form-item",{attrs:{label:"活动限购："}},[s("div",[t._v(t._s(t.form.limitNumber))])]),t._v(" "),s("el-form-item",{attrs:{label:"分享朋友圈标题："}},[s("div",[t._v(t._s(t.form.wxMomentsTitle?t.form.wxMomentsTitle:"-"))])]),t._v(" "),s("el-form-item",{attrs:{label:"分享好友标题："}},[s("div",[t._v(t._s(t.form.wxFriendsTitle?t.form.wxFriendsTitle:"-"))])]),t._v(" "),s("el-form-item",{attrs:{label:"分享好友文案："}},[s("div",[t._v(t._s(t.form.wxFriendsContent?t.form.wxFriendsContent:"-"))])])],1)],1),t._v(" "),s("el-card",{attrs:{shadow:"always"}},[s("div",{staticClass:"flex-row-end",staticStyle:{width:"100%","margin-bottom":"20px"}},[s("div",{staticClass:"flex-row-start",staticStyle:{"padding-right":"20px"}},[s("el-radio-group",{model:{value:t.area,callback:function(e){t.area=e},expression:"area"}},t._l(t.areaItem,function(e,i){return s("el-radio",{key:i,attrs:{disabled:"",label:e.AreaName}},[t._v(t._s(e.AreaName))])})),t._v(" "),s("el-tooltip",{staticClass:"item ml",attrs:{effect:"dark",content:"抹零是指付钱时不计整数以外的尾数；抹零对折后价低于1.00的商品无效；",placement:"top"}},[s("i",{staticClass:"el-icon-question"})])],1)]),t._v(" "),s("div",[s("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.form.productList,"tooltip-effect":"dark","row-class-name":t.getRowClassName}},[s("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.row.list,border:""}},[s("el-table-column",{attrs:{prop:"skuName",label:"规格"}}),t._v(" "),s("el-table-column",{attrs:{prop:"costPrice",label:"成本价（元）"}}),t._v(" "),s("el-table-column",{attrs:{prop:"price",label:"商品原价（元）"}}),t._v(" "),s("el-table-column",{attrs:{prop:"finallyPrice",label:"折后价格（元）"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(0==e.row.finallyPrice?e.row.price:e.row.finallyPrice))]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"skuStock",label:"库存"}})],1)]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"商品名称",prop:"productName"}}),t._v(" "),s("el-table-column",{attrs:{label:"商品库存",prop:"productStock",width:"140"}}),t._v(" "),s("el-table-column",{attrs:{width:"140"},scopedSlots:t._u([{key:"header",fn:function(e){return[s("span",{attrs:{"data-scope":e}},[t._v("商品已售")]),t._v(" "),s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"商品设置初始已抢数量，促进活动气氛，推荐填写。",placement:"top"}},[s("i",{staticClass:"el-icon-question"})])]}},{key:"default",fn:function(e){return[s("div",[t._v(t._s(e.row.productFinallyTotal))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"成本价（元）",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.costPrice?"￥"+e.row.costPrice:"-"))]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"商品售价（元）",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("￥"+t._s(e.row.minPrice))]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"商品折扣",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.discount)+"%")]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"折后价格",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("￥"+t._s(e.row.finallyPrice))]}}])})],1)],1)]),t._v(" "),s("div",{staticClass:"flex-row-center",staticStyle:{"margin-top":"20px"}},[s("el-button",{on:{click:t.back}},[t._v("返 回")])],1)],1)},[],!1,null,"1bc11930",null);c.options.__file="discountInfo.vue";e.default=c.exports},IcQE:function(t,e,s){"use strict";var i=s("UjL9");s.n(i).a},UjL9:function(t,e,s){},bgBq:function(t,e,s){"use strict";var i=s("2H6p");s.n(i).a}}]);
//# sourceMappingURL=chunk-2c64.ddd5ba47.js.map