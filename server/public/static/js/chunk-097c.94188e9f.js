(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-097c"],{KW6Z:function(e,t,o){},Z4Kx:function(e,t,o){"use strict";var r=o("KW6Z");o.n(r).a},fS7f:function(e,t,o){"use strict";o.r(t);var r=o("QbLZ"),n=o.n(r),s=o("L2JU"),a=o("sWNr"),i={data:function(){return{form:{},tree:[],defaultProps:{children:"list",label:"name"},addLoading:!1}},created:function(){this.getTree()},methods:{getTree:function(){var e=this;Object(a.b)().then(function(t){console.log("目录树",t),200==t.code?e.tree=t.data:e.$message.error(t.message)})},cancle:function(){var e=this;this.$confirm("确定放弃编辑?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$router.replace({path:"/systemSetting/roleManage"})}).catch(function(){})},onSubmit:function(){var e=this;if(console.log(this.$refs.tree.getCheckedNodes()),this.form.roleName){var t=[];this.$refs.tree.getCheckedNodes().forEach(function(e){return t.push(e.id)}),console.log("menuIds",t),0!=t.length?(this.addLoading=!0,this.form.shopId=this.shop.shopId,this.form.menuIds=t,Object(a.a)(this.form).then(function(t){console.log("添加角色",t),200==t.code?(e.$message({message:t.message,type:"success"}),setTimeout(function(){e.$router.replace({path:"/systemSetting/roleManage"}),e.addLoading=!1},1e3)):(e.$message.error(t.message),e.addLoading=!1)})):this.$message.error("请至少为角色添加一个菜单权限")}else this.$message.error("请输入角色名称")}},computed:n()({},Object(s.c)(["user","shop"]))},c=(o("Z4Kx"),o("KHd+")),l=Object(c.a)(i,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"pageContent"},[o("el-card",{attrs:{shadow:"always"}},[o("el-form",{ref:"form",attrs:{model:e.form,"label-width":"140px"}},[o("el-form-item",{attrs:{label:"角色名称：",required:""}},[o("el-input",{staticStyle:{width:"400px"},attrs:{maxlength:"20","show-word-limit":""},model:{value:e.form.roleName,callback:function(t){e.$set(e.form,"roleName",t)},expression:"form.roleName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"角色描述："}},[o("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea",maxlength:"100","show-word-limit":""},model:{value:e.form.roleDescription,callback:function(t){e.$set(e.form,"roleDescription",t)},expression:"form.roleDescription"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"菜单授权：",required:""}},[o("el-tree",{ref:"tree",attrs:{data:e.tree,"show-checkbox":"","node-key":"id","highlight-current":"",props:e.defaultProps}})],1),e._v(" "),o("div",{staticClass:"flex-row-center"},[o("el-button",{on:{click:e.cancle}},[e._v("取消")]),e._v(" "),o("el-button",{attrs:{type:"primary",loading:e.addLoading},on:{click:e.onSubmit}},[e._v("立即创建")])],1)],1)],1)],1)},[],!1,null,"43d76ef8",null);l.options.__file="newRole.vue";t.default=l.exports},sWNr:function(e,t,o){"use strict";o.d(t,"c",function(){return n}),o.d(t,"a",function(){return s}),o.d(t,"e",function(){return a}),o.d(t,"d",function(){return i}),o.d(t,"f",function(){return c}),o.d(t,"b",function(){return l});var r=o("t3Un");function n(e){return Object(r.a)({url:"/sys/sysRole/findByCondition",method:"post",data:e})}function s(e){return Object(r.a)({url:"/sys/sysRole/add",method:"post",data:e})}function a(e){return Object(r.a)({url:"/sys/sysRole/update",method:"post",data:e})}function i(e){return Object(r.a)({url:"/sys/sysRole/findById",method:"post",data:e})}function c(e){return Object(r.a)({url:"/sys/sysRole/updateEnable",method:"post",data:e})}function l(){return Object(r.a)({url:"/sys/sysMenu/findAll",method:"post"})}}}]);
//# sourceMappingURL=chunk-097c.94188e9f.js.map