(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-edad"],{D3tq:function(t,e,n){},VeKl:function(t,e,n){"use strict";n.r(e);var s=n("QbLZ"),i=n.n(s),a=n("L2JU"),o=n("lpkF"),l=n("rIiD"),r=n("rg5m"),c={data:function(){return{loading:!1,list:[],listTotal:0,multipleSelection:[],searchForm:{pageNum:1,pageSize:5},selectAllSure:!1,shopNavList:[],navShow:!1,changeNavForm:{navigaId:""},configLoading:!1,form:{},indexShow:!1,vform:{},vShow:!1}},created:function(){this.searchForm.shopId=this.shop.shopId,this.getData()},methods:{getCode:function(){var t=this;this.indexShow=!0,Object(o.a)(this.shop.shopId).then(function(e){console.log("获取店铺二维码",e),200==e.code?t.form=e.data:t.$message.error(e.message)})},getVcode:function(t){var e=this;this.vShow=!0,Object(o.b)(this.shop.shopId,t.vpageId).then(function(t){console.log("获取微页面二维码",t),200==t.code?e.vform=t.data:e.$message.error(t.message)})},getData:function(){var t=this;console.log("this.searchForm",this.searchForm),this.loading=!0,Object(l.i)(this.searchForm).then(function(e){console.log("获取列表",e),200==e.code&&(t.list=e.data.list,t.listTotal=e.data.total,t.loading=!1)})},getSelect:function(){var t=this;Object(r.f)(this.shop.shopId).then(function(e){console.log("权限配置下拉框",e),t.shopNavList=e.data,t.shopNavList.forEach(function(t){return t.id=""+t.id})})},changeNav:function(t){this.getSelect(),this.changeNavForm.vpageId=t.vpageId,this.changeNavForm.navigaId=""+t.navigationId,this.navShow=!0},changeAll:function(){if(0!=this.multipleSelection.length){var t=[];this.multipleSelection.forEach(function(e){return t.push(e.vpageId)}),t=t.join(","),this.getSelect(),this.changeNavForm.vpageId=t,this.navShow=!0}else this.$message.error("请选择数据后再试")},subConfig:function(){var t=this;console.log("this.changeNavForm",this.changeNavForm),this.changeNavForm.navigaId?(this.configLoading=!0,Object(l.e)(this.changeNavForm).then(function(e){console.log("修改导航",e),200==e.code?(t.$message({type:"success",message:"修改成功!"}),t.navShow=!1,t.getData(),setTimeout(function(){t.configLoading=!1},1e3)):t.$message.error(e.message)})):this.$message.error("选择导航后再试")},newPage:function(){var t=this.$router.resolve({name:"新建导航"});window.open(t.href,"_blank")},reset:function(){this.searchForm.pageName="",this.getData()},handleCurrentChange:function(t){this.searchForm.pageNum=t,this.getData()},handleSizeChange:function(t){this.searchForm.pageSize=t,this.getData()},editor:function(t){this.$router.push({path:"/shop/shopRenovation?vpageId="+t.vpageId})},deleteAll:function(){var t=this;0!=this.multipleSelection.length?this.$confirm("确定删除该微页面？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=[];t.multipleSelection.forEach(function(t){return e.push(t.vpageId)}),e=e.join(","),t.deleteFun(e)}).catch(function(){}):this.$message.error("请选择数据后再试")},deletes:function(t){var e=this;this.$confirm("确定删除该微页面？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.deleteFun(t.vpageId)}).catch(function(){})},deleteFun:function(t){var e=this;Object(l.c)(t).then(function(t){console.log("删除操作fun",t),200==t.code?(e.$message({type:"success",message:"删除成功!"}),e.getData()):e.$message.error(t.message)})},setting:function(t){var e=this;this.$confirm("确定设为首页模板？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(l.g)(t.vpageId,e.shop.shopId).then(function(t){console.log("设为首页",t),200==t.code?(e.$message({type:"success",message:"设置成功!"}),e.getData()):e.$message.error(t.message)})}).catch(function(){})},copy:function(t){var e=this;this.$confirm("确定复制该模板？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(l.b)(t.vpageId).then(function(t){console.log("复制导航",t),200==t.code?(e.$message({type:"success",message:"复制成功!"}),e.getData()):e.$message.error(t.message)})}).catch(function(){})},selectAllSureList:function(){this.selectAllSure?(this.selectAllSure=!1,this.$refs.multipleTable.toggleAllSelection()):(this.selectAllSure=!0,this.$refs.multipleTable.clearSelection())},toggleSelection:function(t){var e=this;t?t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(t){this.multipleSelection=t,this.selectAllSure=this.multipleSelection.length==this.list.length&&0!=this.list.length}},computed:i()({},Object(a.c)(["user","shop"]))},u=(n("sO/y"),n("KHd+")),h=Object(u.a)(c,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-row",{attrs:{gutter:24}},[n("el-col",{attrs:{xs:17,sm:18,md:24,lg:24,xl:24}},[n("div",{staticClass:"head-container"},[n("el-card",{staticClass:"filter-container",attrs:{shadow:"never"}},[n("div",{staticClass:"seach"},[n("div",[n("i",{staticClass:"el-icon-search"}),t._v(" "),n("span",[t._v("筛选搜索")])]),t._v(" "),n("div",[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.getData}},[t._v("查询")]),t._v(" "),n("el-button",{attrs:{size:"small"},on:{click:t.reset}},[t._v("重置")])],1)]),t._v(" "),n("div",[n("el-form",{attrs:{inline:!0,size:"small","label-width":"140px"}},[n("el-form-item",{attrs:{label:"页面名称："}},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"输入页面名称"},model:{value:t.searchForm.pageName,callback:function(e){t.$set(t.searchForm,"pageName",e)},expression:"searchForm.pageName"}})],1)],1)],1)])],1),t._v(" "),n("el-card",{staticClass:"operate-container",staticStyle:{"margin-top":"10px"},attrs:{shadow:"never"}},[n("div",{staticClass:"flex-row-between",staticStyle:{width:"100%"}},[n("div",[n("i",{staticClass:"el-icon-tickets"}),t._v(" "),n("span",[t._v("数据列表")])]),t._v(" "),n("div",{staticStyle:{"padding-right":"20px"}},[n("el-button",{staticClass:"filter-item",attrs:{size:"medium",type:"primary",icon:"el-icon-plus"},on:{click:function(e){t.$router.push({path:"/shop/shopRenovation"})}}},[t._v("新建微页面")])],1)])]),t._v(" "),n("el-card",{staticClass:"filter-container",staticStyle:{"margin-top":"20px"},attrs:{shadow:"never"}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%","margin-top":"10px"},attrs:{fixed:"",data:t.list,size:"small",border:""},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),n("el-table-column",{attrs:{fixed:"",prop:"date",label:"页面名称","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.vpageName))]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"页面导航","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(0==e.row.isIndex?e.row.navigationName:"系统配置导航")+"\n            ")]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"city",label:"是否为首页模板","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(0==e.row.isIndex?"否":"是"))]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"address",label:"最新修改时间","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.updateTime))]}}])}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.editor(e.row)}}},[t._v("编辑")]),t._v(" "),0==e.row.isIndex?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.setting(e.row)}}},[t._v("设为首页")]):t._e(),t._v(" "),1==e.row.isIndex?n("el-button",{attrs:{type:"text",size:"small"},on:{click:t.getCode}},[t._v("预览首页")]):t._e(),t._v(" "),0==e.row.isIndex?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.getVcode(e.row)}}},[t._v("预览微页面")]):t._e(),t._v(" "),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.copy(e.row)}}},[t._v("复制")]),t._v(" "),0==e.row.isIndex?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.changeNav(e.row)}}},[t._v("修改导航")]):t._e(),t._v(" "),0==e.row.isIndex?n("el-button",{staticClass:"dangerFont",attrs:{type:"text",size:"small"},on:{click:function(n){t.deletes(e.row)}}},[t._v("删除")]):t._e()]}}])})],1)],1),t._v(" "),n("div",{staticClass:"flex-row-between",staticStyle:{"padding-top":"20px"}},[n("div",{staticClass:"flex-row-start"},[n("div",{staticClass:"flex-row-start"},[n("el-checkbox",{on:{change:t.selectAllSureList},model:{value:t.selectAllSure,callback:function(e){t.selectAllSure=e},expression:"selectAllSure"}},[t._v("当前页全选")]),t._v(" "),n("div",{staticClass:"checkBoxDiv"},[t._v("\n              已选择 "),n("span",{staticStyle:{color:"#409EFF"}},[t._v(t._s(t.multipleSelection.length))]),t._v(" 项\n            ")])],1),t._v(" "),n("div",{staticClass:"flex-row-start",staticStyle:{"margin-left":"20px"}},[n("el-button",{attrs:{type:"primary"},on:{click:t.deleteAll}},[t._v("批量删除")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.changeAll}},[t._v("批量设置导航")])],1)]),t._v(" "),n("div",[n("el-pagination",{attrs:{"page-sizes":[5,10,15,20],"page-size":t.searchForm.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.listTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])],1)],1),t._v(" "),n("el-dialog",{attrs:{title:"",visible:t.navShow,width:"30%"},on:{"update:visible":function(e){t.navShow=e}}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.changeNavForm.navigaId,callback:function(e){t.$set(t.changeNavForm,"navigaId",e)},expression:"changeNavForm.navigaId"}},t._l(t.shopNavList,function(t){return n("el-option",{key:t.id,attrs:{"data-type":typeof t.id,label:t.name,value:t.id}})})),t._v(" "),n("el-button",{on:{click:t.getSelect}},[t._v("刷新")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.newPage}},[t._v("添加导航")]),t._v(" "),n("div",{staticClass:"flex-row-center",staticStyle:{"margin-top":"40px"}},[n("el-button",{staticStyle:{"margin-right":"40px"},on:{click:function(e){t.navShow=!1}}},[t._v("返 回")]),t._v(" "),n("el-button",{attrs:{type:"primary",loading:t.configLoading},on:{click:t.subConfig}},[t._v("确 认")])],1)],1),t._v(" "),n("el-dialog",{attrs:{title:"首页预览",visible:t.indexShow,width:"30%"},on:{"update:visible":function(e){t.indexShow=e}}},[n("div",{staticClass:"imgCode"},[n("el-tabs",{attrs:{"tab-position":"left"}},[n("el-tab-pane",{attrs:{label:"H5"}},[n("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.form.shopIndexImgUrl,alt:""}})]),t._v(" "),n("el-tab-pane",{attrs:{disabled:2==t.form.shopMiniStatus,label:"小程序"}},[n("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.form.miniIndexImgUrl,alt:""}})])],1)],1),t._v(" "),n("div",{staticClass:"flex-row-center",staticStyle:{"margin-top":"40px"}},[n("el-button",{staticStyle:{"margin-right":"40px"},on:{click:function(e){t.indexShow=!1}}},[t._v("关 闭")])],1)]),t._v(" "),n("el-dialog",{attrs:{title:"首页预览",visible:t.vShow,width:"30%"},on:{"update:visible":function(e){t.vShow=e}}},[n("div",{staticClass:"imgCode"},[n("el-tabs",{attrs:{"tab-position":"left"}},[n("el-tab-pane",{attrs:{label:"H5"}},[n("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.vform.shopIndexImgUrl,alt:""}})]),t._v(" "),n("el-tab-pane",{attrs:{disabled:2==t.vform.shopMiniStatus,label:"小程序"}},[n("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.vform.miniIndexImgUrl,alt:""}})])],1)],1),t._v(" "),n("div",{staticClass:"flex-row-center",staticStyle:{"margin-top":"40px"}},[n("el-button",{staticStyle:{"margin-right":"40px"},on:{click:function(e){t.vShow=!1}}},[t._v("关 闭")])],1)])],1)},[],!1,null,"6f8f4e42",null);h.options.__file="shopHome.vue";e.default=h.exports},rIiD:function(t,e,n){"use strict";n.d(e,"h",function(){return i}),n.d(e,"a",function(){return a}),n.d(e,"d",function(){return o}),n.d(e,"f",function(){return l}),n.d(e,"i",function(){return r}),n.d(e,"c",function(){return c}),n.d(e,"g",function(){return u}),n.d(e,"b",function(){return h}),n.d(e,"e",function(){return d});var s=n("t3Un");function i(t){return Object(s.a)({url:"/sys/shopRoom/selectShopRoomList",method:"post",data:t})}function a(t){return Object(s.a)({url:"/sys/business/shopVpage/addShopVpage",method:"post",data:t})}function o(t){return Object(s.a)({url:"/sys/business/shopVpage/editShopVpage",method:"post",data:t})}function l(t){return Object(s.a)({url:"/sys/business/shopVpage/findShopVpageById?vpageId="+t,method:"get"})}function r(t){return Object(s.a)({url:"/sys/business/shopVpage/shopVpagePage",method:"post",data:t})}function c(t){return Object(s.a)({url:"/sys/business/shopVpage/deleteShopVpageById?vpageId="+t,method:"delete"})}function u(t,e){return Object(s.a)({url:"/sys/business/shopVpage/indexShopVpage?vpageId="+t+"&shopId="+e,method:"get"})}function h(t){return Object(s.a)({url:"/sys/business/shopVpage/copyShopVpage?vpageId="+t,method:"get"})}function d(t){return Object(s.a)({url:"/sys/business/shopVpage/editShopVpageNaviga?vpageId="+t.vpageId+"&navigaId="+t.navigaId,method:"get"})}},rg5m:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"e",function(){return a}),n.d(e,"j",function(){return o}),n.d(e,"l",function(){return l}),n.d(e,"a",function(){return r}),n.d(e,"g",function(){return c}),n.d(e,"i",function(){return u}),n.d(e,"b",function(){return h}),n.d(e,"f",function(){return d}),n.d(e,"h",function(){return p}),n.d(e,"d",function(){return g}),n.d(e,"k",function(){return v});var s=n("t3Un");function i(){return Object(s.a)({url:"/sys/business/shopNavigation/getShopNavigationIconList",method:"get"})}function a(t){return Object(s.a)({url:"/sys/business/shopNavigation/getShopNavigationInfoList",method:"post",data:t})}function o(t){return Object(s.a)({url:"/sys/business/shopNavigation/isShopNavigationExist?shopId="+t.shopId+"&name="+t.name,method:"get"})}function l(t){return Object(s.a)({url:"/sys/business/shopNavigation/updateShopNaigationName",method:"post",data:t})}function r(t){return Object(s.a)({url:"/sys/business/shopNavigation/deleteShopNaigation",method:"post",data:t})}function c(t){return Object(s.a)({url:"/sys/business/shopNavigation/getSystemLinkList",method:"get"})}function u(t){return Object(s.a)({url:"/sys/business/shopNavigation/insertShopNavigation",method:"post",data:t})}function h(t){return Object(s.a)({url:"/sys/business/shopNavigation/getShopNavigationConfig?shopId="+t,method:"get"})}function d(t){return Object(s.a)({url:"/sys/business/shopNavigation/getShopNavigationInfoNoPageList?shopId="+t,method:"get"})}function p(t){return Object(s.a)({url:"/sys/business/shopNavigation/insertNavigationConfig",method:"post",data:t})}function g(t){return Object(s.a)({url:"/sys/business/shopNavigation/getShopNavigationInfo?id="+t,method:"get"})}function v(t){return Object(s.a)({url:"/sys/business/shopNavigation/udpateShopNaigationInfo",method:"post",data:t})}},"sO/y":function(t,e,n){"use strict";var s=n("D3tq");n.n(s).a}}]);
//# sourceMappingURL=chunk-edad.e2f0de99.js.map