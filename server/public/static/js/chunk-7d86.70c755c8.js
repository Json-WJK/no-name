(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7d86"],{PRgn:function(t,e,s){"use strict";s.d(e,"b",function(){return a}),s.d(e,"e",function(){return r}),s.d(e,"a",function(){return n}),s.d(e,"f",function(){return i}),s.d(e,"h",function(){return c}),s.d(e,"g",function(){return l}),s.d(e,"d",function(){return u}),s.d(e,"c",function(){return p});var o=s("t3Un");function a(t){return Object(o.a)({url:"/product/business/productCategoryShop/getProductCategoryInfoList",method:"post",data:t})}function r(t){return Object(o.a)({url:"/product/business/productCategoryShop/insertProductCategoryShop",method:"post",data:t})}function n(t){return Object(o.a)({url:"/product/business/productCategoryShop/deleteProductCategoryShop",method:"post",data:t})}function i(t){return Object(o.a)({url:"/product/business/productCategoryShop/isCategoryNameExist?name="+t.name+"&level="+t.level+"&shopId="+t.shopId+"&parentId="+t.parentId,method:"get"})}function c(t){return Object(o.a)({url:"/product/business/productCategoryShop/updateProductCategoryShopOrderNo",method:"post",data:t})}function l(t){return Object(o.a)({url:"/product/business/productCategoryShop/updateProductCategoryShop",method:"post",data:t})}function u(t){return Object(o.a)({url:"/product/business/productCategoryShop/getProductCategoryShopAllList?shopId="+t,method:"get"})}function p(t){return Object(o.a)({url:"/product/business/productCategoryShop/getProductCategoryInfoPageList",method:"post",data:t})}},bStR:function(t,e,s){},gjXP:function(t,e,s){"use strict";var o=s("bStR");s.n(o).a},"i/Tg":function(t,e,s){"use strict";s.d(e,"d",function(){return a}),s.d(e,"j",function(){return r}),s.d(e,"b",function(){return n}),s.d(e,"c",function(){return i}),s.d(e,"g",function(){return c}),s.d(e,"i",function(){return l}),s.d(e,"h",function(){return u}),s.d(e,"a",function(){return p}),s.d(e,"f",function(){return h}),s.d(e,"e",function(){return d});var o=s("t3Un");function a(t){return Object(o.a)({url:"/product/business/product/getProductInfoList",method:"post",data:t})}function r(t,e){return Object(o.a)({url:"/product/business/product/updateSalesStatus?id="+t+"&salesStatus="+e,method:"get"})}function n(t){return Object(o.a)({url:"/product/business/product/deleteProduct?id="+t,method:"delete"})}function i(t){return Object(o.a)({url:"/product/business/product/getProductInfoById?productId="+t,method:"get"})}function c(t,e,s){return Object(o.a)({url:"/product/business/product/restoreDeleteStatus?productIds="+t+"&salesStatus="+e+"&shopId="+s,method:"get"})}function l(t){return Object(o.a)({url:"/product/business/product/updateProductCategoryShop",method:"post",data:t})}function u(t){return Object(o.a)({url:"/product/business/product/updateProduct",method:"post",data:t})}function p(t){return Object(o.a)({url:"/sys/business/shopActivity/checkProduct",method:"post",data:t})}function h(t){return Object(o.a)({url:"/product/subgroupProduct/getSubgroupProductList",method:"post",data:t})}function d(t){return Object(o.a)({url:"/product/subgroupProduct/getSubgroupProductInfos?productIds="+t,method:"get"})}},yfwf:function(t,s,o){"use strict";o.r(s);var a=o("QbLZ"),r=o.n(a),n=o("EJiy"),i=o.n(n),c=o("L2JU"),l=o("PRgn"),u=o("i/Tg"),p={data:function(){return{searchList:{tabType:"1",shopCategoryIdArr:[],pageNum:1,pageSize:5,productWarnType:""},category:[],list:[],listTotal:0,multipleSelection:[],selectAllSure:!1,showClass:!1,ruleForm:{},props:{multiple:!0},changeClassLoading:!1}},created:function(){this.searchList.shopId=this.shop.shopId,console.log(i()(this.$route.query.productWarnType)),this.$route.query.productWarnType&&(this.searchList.productWarnType=this.$route.query.productWarnType),this.$route.query.tabType&&(this.searchList.tabType=this.$route.query.tabType+""),this.getData(),this.getCategory()},methods:{tableSortChange:function(t){console.log(t.column),this.searchList.sort=t.column.sortable,"ascending"==t.column.order&&(this.searchList.direction="asc"),"descending"==t.column.order&&(this.searchList.direction="desc"),this.getData()},getData:function(){var t=this;this.searchList.shopCategoryId=this.searchList.shopCategoryIdArr[1]||"",this.searchList.shopCategoryPid=this.searchList.shopCategoryIdArr[0]||"",console.log("请求的数据",this.searchList),Object(u.d)(this.searchList).then(function(e){console.log("数据列表",e),200==e.code&&(t.list=e.data.list,t.listTotal=e.data.total)})},changeClass:function(){0!=this.multipleSelection.length?this.showClass=!0:this.$message({message:"请选择商品后再试",type:"warning"})},changeClassFun:function(){var t=this;if(console.log(this.ruleForm),this.ruleForm.shopCategoryIdsArr){this.changeClassLoading=!0;var e=[];this.multipleSelection.forEach(function(t){return e.push(t.id)});var s=[];this.ruleForm.shopCategoryIdsArr.forEach(function(t){var e={pid:t[0],id:t[1]};s.push(e)});var o={shopCategoryIdArray:s,productId:e};console.log("arr",s),Object(u.i)(o).then(function(e){console.log("批量改分类",e),200==e.code?(t.$message({message:"修改成功",type:"success"}),t.getData(),t.showClass=!1,setTimeout(function(){t.changeClassLoading=!1},1e3)):(t.changeClassLoading=!1,t.$message.error(e.message))})}else this.$message.error("请选择分类后再试")},restoreItem:function(t,e){var s=this;this.$confirm("确认将该商品恢复到"+(0==e?"出售中":"下架")+"吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){s.restoreFun(t.id,e)}).catch(function(){})},restoreALl:function(t){var e=this;0!=this.multipleSelection.length?this.$confirm("确认将该商品移入回收站吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var s=[];e.multipleSelection.forEach(function(t){return s.push(t.id)}),e.restoreFun(s.join(","),t)}).catch(function(){}):this.$message({message:"请选择商品后再试",type:"warning"})},restoreFun:function(t,e){var s=this;Object(u.g)(t,e,this.shop.shopId).then(function(t){console.log("恢复",t),200==t.code?(s.$message({message:t.message,type:"success"}),s.getData()):s.$message.error(t.message)})},deleteItem:function(t){var e=this;this.$confirm("确认将该商品移入回收站吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.deleteProduct(t.id)}).catch(function(){})},deleteAll:function(){var t=this;if(0!=this.multipleSelection.length){var e=[];if(this.multipleSelection.forEach(function(t){return e.push(t.id)}),1==this.searchList.tabType)return console.log("下架检测"),void Object(u.a)({ids:e,operateType:2}).then(function(s){console.log("下架检测",s),200==s.code?t.$confirm("确认将该商品移入回收站吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.deleteProduct(e.join(","))}).catch(function(){}):t.$message.error(s.message)});this.$confirm("确认将该商品移入回收站吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.deleteProduct(e.join(","))}).catch(function(){})}else this.$message({message:"请选择商品后再试",type:"warning"})},deleteProduct:function(t){var e=this;Object(u.b)(t).then(function(t){console.log("商品删除",t),200==t.code?(e.$message({message:t.message,type:"success"}),e.getData()):e.$message.error(t.message)})},selectAllSureList:function(){this.selectAllSure?(this.selectAllSure=!1,this.$refs.multipleTable.toggleAllSelection()):(this.selectAllSure=!0,this.$refs.multipleTable.clearSelection()),console.log("multipleSelection",this.multipleSelection)},salesStatuItem:function(t,e){var s=this;if(1==e)return console.log("下架检测"),void Object(u.a)({ids:[t.id],operateType:1}).then(function(o){console.log("下架检测",o),200==o.code?s.$confirm("确认将该商品下架吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){s.updateSalesStatus(t.id,e)}).catch(function(){}):s.$message.error(o.message)});this.$confirm("确认将该商品上架吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){s.updateSalesStatus(t.id,e)}).catch(function(){})},salesStatuAll:function(t){var s=this;if(0!=this.multipleSelection.length){var o=[];if(this.multipleSelection.forEach(function(t){return o.push(t.id)}),1==this.searchList.tabType)return console.log("出售中点击的"),void Object(u.a)({ids:o,operateType:1}).then(function(o){console.log("下架检测",o),200==o.code?s.$confirm("确认将该商品下架吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){s.updateSalesStatus(e.id,t)}).catch(function(){}):s.$message.error(o.message)});this.$confirm("确认将该商品上架吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){s.updateSalesStatus(o.join(","),t)}).catch(function(){})}else this.$message({message:"请选择商品后再试",type:"warning"})},updateSalesStatus:function(t,e){var s=this;Object(u.j)(t,e).then(function(t){console.log("商品上下架",t),200==t.code?(s.$message({message:t.message,type:"success"}),s.getData()):s.$message.error(t.message)})},reset:function(){this.searchList.name="",this.searchList.shopCategoryIdArr=[],this.searchList.shopCategoryId="",this.searchList.shopCategoryPid="",this.searchList.code="",this.searchList.skuCode="",this.searchList.companyType="",this.searchList.productWarnType="",this.getData()},toggleSelection:function(t){var e=this;t?t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(t){this.multipleSelection=t,this.selectAllSure=this.multipleSelection.length==this.list.length&&0!=this.list.length},getCategory:function(){var t=this;Object(l.d)(this.shop.shopId).then(function(e){console.log("获取店铺分类",e),t.category=e.data})},handleSizeChange:function(t){console.log("每页 "+t+" 条"),this.searchList.pageSize=t,this.getData()},handleCurrentChange:function(t){console.log("当前页: "+t),this.searchList.pageNum=t,this.getData()},change:function(){this.$forceUpdate()}},computed:r()({},Object(c.c)(["user","shop"]))},h=(o("gjXP"),o("KHd+")),d=Object(h.a)(p,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pageContent"},[s("el-card",{staticClass:"filter-container",attrs:{shadow:"never"}},[s("el-tabs",{on:{"tab-click":t.getData},model:{value:t.searchList.tabType,callback:function(e){t.$set(t.searchList,"tabType",e)},expression:"searchList.tabType"}},[s("el-tab-pane",{attrs:{label:"出售中",name:"1"}}),t._v(" "),s("el-tab-pane",{attrs:{label:"待出售",name:"0"}}),t._v(" "),s("el-tab-pane",{attrs:{label:"已下架",name:"2"}}),t._v(" "),s("el-tab-pane",{attrs:{label:"回收站",name:"3"}})],1),t._v(" "),s("div",[s("i",{staticClass:"el-icon-search"}),t._v(" "),s("span",[t._v("筛选搜索")]),t._v(" "),s("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:t.getData}},[t._v("查询")]),t._v(" "),s("el-button",{staticStyle:{float:"right","margin-right":"15px"},attrs:{size:"small"},on:{click:t.reset}},[t._v("重置")])],1),t._v(" "),s("div",{staticStyle:{"margin-top":"15px"}},[s("el-form",{attrs:{inline:!0,model:t.searchList,size:"small","label-width":"140px"}},[s("el-form-item",{attrs:{label:"商品名称："}},[s("el-input",{staticStyle:{width:"203px"},attrs:{clearable:"",placeholder:"商品名称"},on:{input:function(e){t.change(e)}},model:{value:t.searchList.name,callback:function(e){t.$set(t.searchList,"name",e)},expression:"searchList.name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"商品类目："}},[s("el-cascader",{attrs:{options:t.category,props:{checkStrictly:!0},clearable:""},model:{value:t.searchList.shopCategoryIdArr,callback:function(e){t.$set(t.searchList,"shopCategoryIdArr",e)},expression:"searchList.shopCategoryIdArr"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"商品编码："}},[s("el-input",{staticStyle:{width:"203px"},attrs:{clearable:"",placeholder:"商品编码"},on:{input:function(e){t.change(e)}},model:{value:t.searchList.code,callback:function(e){t.$set(t.searchList,"code",e)},expression:"searchList.code"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"规格编码："}},[s("el-input",{staticStyle:{width:"203px"},attrs:{clearable:"",placeholder:"规格编码"},on:{input:function(e){t.change(e)}},model:{value:t.searchList.skuCode,callback:function(e){t.$set(t.searchList,"skuCode",e)},expression:"searchList.skuCode"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"物流服务："}},[s("el-select",{attrs:{clearable:"",placeholder:"请选择物流服务"},model:{value:t.searchList.companyType,callback:function(e){t.$set(t.searchList,"companyType",e)},expression:"searchList.companyType"}},[s("el-option",{attrs:{label:"包邮",value:"0"}}),t._v(" "),s("el-option",{attrs:{label:"不包邮",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"到店自提",value:"2"}})],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"库存预警："}},[s("el-select",{attrs:{clearable:"",placeholder:"请选择库存状态"},model:{value:t.searchList.productWarnType,callback:function(e){t.$set(t.searchList,"productWarnType",e)},expression:"searchList.productWarnType"}},[s("el-option",{attrs:{label:"已售罄（当前库存为0）",value:"0"}}),t._v(" "),s("el-option",{attrs:{label:"已滞销（销量为0）",value:"1"}})],1)],1)],1)],1)],1),t._v(" "),s("el-card",{staticClass:"operate-container mt10",attrs:{shadow:"never"}},[s("div",{staticClass:"flex-row-between",staticStyle:{width:"100%"}},[s("div",[s("i",{staticClass:"el-icon-tickets"}),t._v(" "),s("span",[t._v("数据列表")]),t._v(" "),s("span",{staticStyle:{"margin-left":"40px",color:"#E6A23C"}},[t._v("温馨提示：如果一个商品是多规格，成本价取最低值，销售价取该商品最高值，库存为该商品所有库存之和；")])]),t._v(" "),s("div",{staticStyle:{"padding-right":"20px"}},[s("el-button",{attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:function(e){t.$router.push({path:"/commodity/addCommodity"})}}},[t._v("新增商品")])],1)])]),t._v(" "),s("div",[s("el-card",{staticClass:"filter-container",staticStyle:{"margin-top":"20px"},attrs:{shadow:"never"}},[s("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.list,"tooltip-effect":"dark"},on:{"sort-change":t.tableSortChange,"selection-change":t.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),s("el-table-column",{attrs:{label:"商品信息",width:"400"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"flex-row-start"},[s("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.imageUrl,fit:"fill"}}),t._v(" "),s("span",{staticStyle:{flex:"1","margin-left":"10px"}},[t._v(t._s(e.row.name))])],1)]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"productCategoryShopName",label:"分类"}}),t._v(" "),s("el-table-column",{attrs:{prop:"activityName",label:"活动状态"}}),t._v(" "),s("el-table-column",{attrs:{label:"物流服务",prop:"companyNane"}}),t._v(" "),s("el-table-column",{attrs:{prop:"sumStock",label:"库存"}}),t._v(" "),s("el-table-column",{attrs:{label:"成本价",sortable:"minOriginPrice"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.minOriginPrice?e.row.minOriginPrice:"-")+"\n          ")]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"maxPrice",label:"销售价",sortable:"maxPrice"}}),t._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[3==t.searchList.tabType?s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){t.restoreItem(e.row,1)}}},[t._v("恢复至已下架")]):t._e(),t._v(" "),3==t.searchList.tabType?s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){t.restoreItem(e.row,0)}}},[t._v("恢复至出售中")]):t._e(),t._v(" "),1!=t.searchList.tabType&&3!=t.searchList.tabType?s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){t.salesStatuItem(e.row,0)}}},[t._v("上架")]):t._e(),t._v(" "),1==t.searchList.tabType?s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){t.salesStatuItem(e.row,1)}}},[t._v("下架")]):t._e(),t._v(" "),s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){t.$router.push({path:"/commodity/commodityList/commodityInfo",query:{productId:e.row.id}})}}},[t._v("查看详情")]),t._v(" "),3!=t.searchList.tabType&&1!=t.searchList.tabType?s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){t.$router.push({path:"/commodity/commodityList/editCommodity",query:{productId:e.row.id}})}}},[t._v("编辑")]):t._e(),t._v(" "),0==t.searchList.tabType||2==t.searchList.tabType?s("el-button",{staticStyle:{color:"#909399"},attrs:{type:"text",size:"small"},on:{click:function(s){t.deleteItem(e.row)}}},[t._v("删除")]):t._e()]}}])})],1),t._v(" "),s("div",{staticClass:"flex-row-between",staticStyle:{"padding-top":"20px"}},[s("div",{staticClass:"flex-row-start"},[s("div",{staticClass:"flex-row-start"},[s("el-checkbox",{on:{change:t.selectAllSureList},model:{value:t.selectAllSure,callback:function(e){t.selectAllSure=e},expression:"selectAllSure"}},[t._v("当前页全选")]),t._v(" "),s("div",{staticClass:"checkBoxDiv"},[t._v("\n              已选择 "),s("span",{staticStyle:{color:"#409EFF"}},[t._v(t._s(t.multipleSelection.length))]),t._v(" 项\n            ")])],1),t._v(" "),s("div",{staticClass:"flex-row-start",staticStyle:{"margin-left":"20px"}},[1!=t.searchList.tabType&&3!=t.searchList.tabType?s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.salesStatuAll(0)}}},[t._v("批量上架")]):t._e(),t._v(" "),1==t.searchList.tabType?s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.salesStatuAll(1)}}},[t._v("批量下架")]):t._e(),t._v(" "),1==t.searchList.tabType||2==t.searchList.tabType?s("el-button",{attrs:{type:"primary"},on:{click:t.deleteAll}},[t._v("批量删除")]):t._e(),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.changeClass}},[t._v("批量改分类")]),t._v(" "),3==t.searchList.tabType?s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.restoreALl(1)}}},[t._v("批量恢复至已下架")]):t._e(),t._v(" "),3==t.searchList.tabType?s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.restoreALl(0)}}},[t._v("批量恢复至出售中")]):t._e()],1)]),t._v(" "),s("div",[s("el-pagination",{attrs:{"page-sizes":[5,10,15,20],"page-size":t.searchList.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.listTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])],1)],1),t._v(" "),s("el-dialog",{attrs:{title:"请选择新分类",visible:t.showClass,width:"40%"},on:{"update:visible":function(e){t.showClass=e}}},[s("div",[t._v("\n      已选择"),s("span",{staticStyle:{color:"#F56C6C"}},[t._v(t._s(t.multipleSelection.length))]),t._v("条商品\n    ")]),t._v(" "),s("div",[s("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,"label-width":"140px"}},[s("el-form-item",{attrs:{label:"商品分类：",required:""}},[s("el-cascader",{attrs:{options:t.category,props:t.props,clearable:""},model:{value:t.ruleForm.shopCategoryIdsArr,callback:function(e){t.$set(t.ruleForm,"shopCategoryIdsArr",e)},expression:"ruleForm.shopCategoryIdsArr"}})],1),t._v(" "),s("div",{staticClass:"flex-row-end"},[s("el-button",{attrs:{loading:t.changeClassLoading,type:"primary"},on:{click:t.changeClassFun}},[t._v("确 定")]),t._v(" "),s("el-button",{on:{click:function(e){t.showClass=!1}}},[t._v("取 消")])],1)],1)],1)])],1)},[],!1,null,"4fe6983a",null);d.options.__file="commodityList.vue";s.default=d.exports}}]);
//# sourceMappingURL=chunk-7d86.70c755c8.js.map