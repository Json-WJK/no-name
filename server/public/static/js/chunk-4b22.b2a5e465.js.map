{"version":3,"sources":["webpack:///./src/api/shop/selectShop.js","webpack:///./src/views/shop/shopInformation/shopInformation.vue?e24f","webpack:///./src/views/shop/shopInformation/shopInformation.vue?1a2e","webpack:///./src/views/shop/shopInformation/shopInformation.vue?9e45","webpack:///src/views/shop/shopInformation/shopInformation.vue","webpack:///./src/views/shop/shopInformation/shopInformation.vue"],"names":["__webpack_require__","d","__webpack_exports__","getShopInfoList","getUserInfo","updateShopStatus","updatePassword","getShopInfoById","updateUserInfo","updateShopInfo","_utils_request__WEBPACK_IMPORTED_MODULE_0__","id","t","request","url","method","data","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_7_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_7_2_node_modules_vue_loader_lib_index_js_vue_loader_options_shopInformation_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","n","shopInformation_shopInformationvue_type_script_lang_js_","ruleForm","rules","logoUrl","required","message","trigger","shopName","min","max","contactNumber","validator","rule","value","callback","Error","reg","console","log","test","actions","subLoading","created","this","getData","shop","shopId","mounted","clipboard","methods","defineProperty_default","copyLink","$message","type","submitForm","formName","_this","$refs","validate","valid","Object","selectShop","then","res","code","setTimeout","error","_this2","$store","commit","licenseImgSuccess","file","fileUrl","name","beforeAvatarUpload","imgType","isLt5M","size","deleteLIC","e","handleAvatarSuccess","imageUrl","URL","createObjectURL","raw","isJPG","isLt2M","computed","extends_default","vuex_esm","headers","Authorization","auth","component","componentNormalizer","_vm","_h","$createElement","_c","_self","staticClass","_v","ref","attrs","model","label-width","label","prop","action","show-file-list","on-success","before-upload","slot","src","staticStyle","width","text-align","icon","circle","on","click","_e","$$v","$set","expression","placeholder","maxlength","show-word-limit","margin-right","height","shopIndexImgUrl","alt","shopMiniStatus","miniIndexImgUrl","_s","pictureSpaceSize","loading","$event","data-clipboard-text","shopIndexUrl","options","__file"],"mappings":"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","file":"static/js/chunk-4b22.b2a5e465.js","sourcesContent":["import request from '@/utils/request'\r\n// 获取店铺列表\r\nexport function getShopInfoList (id,t) {\r\n  return request({\r\n    url: `/sys/business/shopInfo/getShopInfoList?userId=${id}&shopType=${t}`,\r\n    method: 'get',\r\n  })\r\n}\r\n// 获取商户信息\r\nexport function getUserInfo (id) {\r\n  return request({\r\n    url: `/user/business/user/getUserInfo?userId=${id}`,\r\n    method: 'get',\r\n  })\r\n}\r\n// 冻结 || 解冻 || 删除 店铺\r\nexport function updateShopStatus(data) {\r\n  return request({\r\n    url: `/sys/business/shopInfo/updateShopStatus`,\r\n    method: 'post',\r\n    data: data\r\n  })\r\n}\r\n// 修改店铺密码\r\nexport function updatePassword(data) {\r\n  return request({\r\n    url: `/user/business/user/updatePassword`,\r\n    method: 'post',\r\n    data: data\r\n  })\r\n}\r\n// 查询店铺信息\r\nexport function getShopInfoById (id) {\r\n  return request({\r\n    url: `/sys/business/shopInfo/getShopInfoById?shopId=${id}`,\r\n    method: 'get',\r\n  })\r\n}\r\n// 修改用户信息\r\nexport function updateUserInfo(data) {\r\n  return request({\r\n    url: `/user/business/user/updateUserInfo`,\r\n    method: 'post',\r\n    data: data\r\n  })\r\n}\r\n// 修改店铺信息\r\nexport function updateShopInfo(data) {\r\n  return request({\r\n    url: `/sys/business/shopInfo/updateShopInfo`,\r\n    method: 'post',\r\n    data: data\r\n  })\r\n}\r\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js??ref--7-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--7-2!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shopInformation.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js??ref--7-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--7-2!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shopInformation.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"pageContent\"},[_c('el-card',{staticClass:\"box-card\"},[_c('div',{staticClass:\"pageHead\"},[_vm._v(\"店铺基本信息\")]),_vm._v(\" \"),_c('div',{staticClass:\"form\"},[_c('el-form',{ref:\"ruleForm\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.ruleForm,\"rules\":_vm.rules,\"label-width\":\"140px\"}},[_c('el-form-item',{attrs:{\"label\":\"店铺LOGO：\",\"prop\":\"logoUrl\"}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"headers\":_vm.headers,\"action\":_vm.actions,\"name\":\"file\",\"show-file-list\":false,\"on-success\":_vm.licenseImgSuccess,\"before-upload\":_vm.beforeAvatarUpload}},[_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"建议尺寸400*400像素，仅支持jpg，png格式\")]),_vm._v(\" \"),(_vm.ruleForm.logoUrl)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.ruleForm.logoUrl}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"}),_vm._v(\" \"),(_vm.ruleForm.logoUrl)?_c('div',{staticClass:\"el-upload__tip\",staticStyle:{\"width\":\"178px\",\"text-align\":\"center\"},attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"circle\":\"\"},on:{\"click\":_vm.deleteLIC}})],1):_vm._e()])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"店铺名称：\",\"prop\":\"shopName\"}},[_c('el-input',{staticStyle:{\"width\":\"400px\"},model:{value:(_vm.ruleForm.shopName),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"shopName\", $$v)},expression:\"ruleForm.shopName\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"联系电话：\",\"prop\":\"contactNumber\"}},[_c('el-input',{staticStyle:{\"width\":\"400px\"},model:{value:(_vm.ruleForm.contactNumber),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"contactNumber\", $$v)},expression:\"ruleForm.contactNumber\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"店铺介绍：\"}},[_c('el-input',{staticStyle:{\"width\":\"400px\"},attrs:{\"type\":\"textarea\",\"placeholder\":\"请输入内容\",\"maxlength\":\"30\",\"show-word-limit\":\"\"},model:{value:(_vm.ruleForm.shopComment),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"shopComment\", $$v)},expression:\"ruleForm.shopComment\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"店铺首页地址：\"}},[_c('div',{staticClass:\"flex-row-start\"},[_c('div',{staticStyle:{\"margin-right\":\"20px\"}},[_c('img',{staticStyle:{\"width\":\"100px\",\"height\":\"100px\"},attrs:{\"src\":_vm.ruleForm.shopIndexImgUrl,\"alt\":\"\"}}),_vm._v(\" \"),_c('div',{staticClass:\"tac\"},[_vm._v(\"H5\")])]),_vm._v(\" \"),(_vm.ruleForm.shopMiniStatus != 2)?_c('div',[_c('img',{staticStyle:{\"width\":\"100px\",\"height\":\"100px\"},attrs:{\"src\":_vm.ruleForm.miniIndexImgUrl,\"alt\":\"\"}}),_vm._v(\" \"),_c('div',{staticClass:\"tac\"},[_vm._v(\"小程序\")])]):_vm._e()])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"图片云盘空间：\"}},[_c('div',[_vm._v(_vm._s(_vm.ruleForm.pictureSpaceSize)+\" / \"+_vm._s(_vm.ruleForm.pictureSpaceSize))])]),_vm._v(\" \"),_c('el-form-item',{staticStyle:{\"text-align\":\"center\"}},[_c('el-button',{attrs:{\"loading\":_vm.subLoading,\"type\":\"primary\"},on:{\"click\":function($event){_vm.submitForm('ruleForm')}}},[_vm._v(\"保存店铺信息\")]),_vm._v(\" \"),_c('el-button',{staticClass:\"copyBtn\",attrs:{\"data-clipboard-text\":_vm.ruleForm.shopIndexUrl},on:{\"click\":_vm.copyLink}},[_vm._v(\"复制店铺地址\")])],1)],1)],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/happypack/loader.js?id=js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shopInformation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/happypack/loader.js?id=js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shopInformation.vue?vue&type=script&lang=js&\"","<template>\r\n  <div class=\"pageContent\">\r\n    <el-card class=\"box-card\">\r\n      <div class=\"pageHead\">店铺基本信息</div>\r\n      <div class=\"form\">\r\n        <el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"140px\" class=\"demo-ruleForm\">\r\n          <el-form-item label=\"店铺LOGO：\" prop=\"logoUrl\">\r\n            <el-upload\r\n              class=\"avatar-uploader\"\r\n              :headers=\"headers\"\r\n              :action=\"actions\"\r\n              name=\"file\"\r\n              :show-file-list=\"false\"\r\n              :on-success=\"licenseImgSuccess\"\r\n              :before-upload=\"beforeAvatarUpload\">\r\n              <div slot=\"tip\" class=\"el-upload__tip\">建议尺寸400*400像素，仅支持jpg，png格式</div>\r\n              <img v-if=\"ruleForm.logoUrl\" :src=\"ruleForm.logoUrl\" class=\"avatar\">\r\n              <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n              <div v-if=\"ruleForm.logoUrl\" slot=\"tip\" class=\"el-upload__tip\" style=\"width:178px;text-align:center;\">\r\n                <el-button type=\"danger\" icon=\"el-icon-delete\" circle @click=\"deleteLIC\"></el-button>\r\n              </div>\r\n            </el-upload>\r\n          </el-form-item>\r\n          <el-form-item label=\"店铺名称：\" prop=\"shopName\">\r\n            <el-input style=\"width:400px;\" v-model=\"ruleForm.shopName\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"联系电话：\" prop=\"contactNumber\">\r\n            <el-input style=\"width:400px;\" v-model=\"ruleForm.contactNumber\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"店铺介绍：\">\r\n            <el-input\r\n              style=\"width:400px;\"\r\n              type=\"textarea\"\r\n              placeholder=\"请输入内容\"\r\n              v-model=\"ruleForm.shopComment\"\r\n              maxlength=\"30\"\r\n              show-word-limit\r\n            >\r\n            </el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"店铺首页地址：\">\r\n            <div class=\"flex-row-start\">\r\n              <div style=\"margin-right:20px;\">\r\n                <img style=\"width:100px;height:100px;\" :src=\"ruleForm.shopIndexImgUrl\" alt=\"\">\r\n                <div class=\"tac\">H5</div>\r\n              </div>\r\n              <div v-if=\"ruleForm.shopMiniStatus != 2\">\r\n                <img style=\"width:100px;height:100px;\" :src=\"ruleForm.miniIndexImgUrl\" alt=\"\">\r\n                <div class=\"tac\">小程序</div>\r\n              </div>\r\n            </div>\r\n          </el-form-item>\r\n          <el-form-item label=\"图片云盘空间：\">\r\n            <div>{{ruleForm.pictureSpaceSize}} / {{ruleForm.pictureSpaceSize}}</div>\r\n          </el-form-item>\r\n          <el-form-item style=\"text-align:center;\">\r\n            <el-button :loading=\"subLoading\" type=\"primary\" @click=\"submitForm('ruleForm')\">保存店铺信息</el-button>\r\n            <el-button class=\"copyBtn\" :data-clipboard-text=\"ruleForm.shopIndexUrl\" @click=\"copyLink\">复制店铺地址</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { getToken } from '@/utils/auth'\r\nimport { mapState } from 'vuex'\r\nimport { getShopInfoById , updateShopInfo } from '@/api/shop/selectShop'\r\nexport default {\r\n  data(){\r\n    var checkPhone = (rule, value, callback) => {\r\n      if (!value) {\r\n        return callback(new Error('手机号不能为空'));\r\n      } else {\r\n        const reg = /^1[3|4|5|7|8][0-9]\\d{8}$/\r\n        console.log(reg.test(value));\r\n        if (reg.test(value)) {\r\n          callback();\r\n        } else {\r\n          return callback(new Error('请输入正确的手机号'));\r\n        }\r\n      }\r\n    };\r\n    return{\r\n      ruleForm:{},              // 编辑的信息\r\n      rules: {\r\n        logoUrl: [\r\n          { required: true, message: '请上传店铺图片', trigger: 'blur' },\r\n        ],\r\n        shopName:[\r\n          { required: true, message: '请输入店铺名称', trigger: 'blur' },\r\n          { min: 1, max: 20, message: '长度在 1 到 20 个字符', trigger: 'blur' }\r\n        ],\r\n        contactNumber: [\r\n          {required: true, validator: checkPhone, trigger: 'blur'}\r\n        ],\r\n      },\r\n      actions:'',               // 上传地址的路径\r\n      subLoading:false,         // 保存信息的loading\r\n    }\r\n  },\r\n  created(){\r\n    this.getData()\r\n    this.actions = `/sys/business/shopInfo/uploadShopLogo?shopId=${this.shop.shopId}`\r\n  },\r\n  mounted() {\r\n    const clipboard = new this.clipboard(\".copyBtn\");\r\n  },\r\n  methods:{\r\n    // 复制链接\r\n    copyLink() {\r\n      this.$message({\r\n        message: '复制成功',\r\n        type: 'success'\r\n      });\r\n    },\r\n    // \r\n    submitForm(formName){\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          console.log('提交的数据',this.ruleForm)\r\n          this.subLoading = true;\r\n          updateShopInfo(this.ruleForm).then(res=>{\r\n            console.log('编辑店铺',res)\r\n            if(res.code == 200){\r\n              this.$message({\r\n                message: '编辑店铺成功',\r\n                type: 'success'\r\n              });\r\n              this.getData()\r\n              setTimeout(()=>{\r\n                this.subLoading = false;\r\n              },1000)\r\n            }else{\r\n              this.subLoading = false;\r\n              this.$message.error(res.message);\r\n            }\r\n          })\r\n        } else {\r\n          console.log('error submit!!');\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    // 获取店铺信息\r\n    getData(){\r\n      getShopInfoById(this.shop.shopId).then(res=>{\r\n        console.log('查看店铺详情',res)\r\n        this.ruleForm = res.data\r\n        this.$store.commit('SET_SHOP_NAME',res.data.shopName)\r\n        this.$store.commit('SET_SHOP_LOGO',res.data.logoUrl)\r\n      })\r\n    },\r\n    // 上传店铺图片\r\n    licenseImgSuccess(res, file) {\r\n      console.log('res',res)\r\n      console.log('file',file)\r\n      console.log(res.data.fileUrl)\r\n      this.ruleForm.logoUrl = res.data.name;\r\n    },\r\n    // 表单 - 上传图片 - 检测\r\n    beforeAvatarUpload(file) {\r\n      let imgType;\r\n      let type = file.type;\r\n      if(type  === 'image/jpeg' || type  === 'image/jpg' || type  === 'image/bmp' || type  === 'image/gif' || type  === 'image/png'){\r\n        imgType = true;\r\n      }else{\r\n        imgType = false;\r\n      }\r\n      const isLt5M = file.size / 1024 / 1024 < 5;\r\n\r\n      if (!imgType) {\r\n        this.$message.error('上传图片只能是 .jpg .jpeg .bmp .gif .png 格式!');\r\n      }\r\n      if (!isLt5M) {\r\n        this.$message.error('上传图片大小不能超过 5MB!');\r\n      }\r\n      return imgType && isLt5M;\r\n    },\r\n    // 表单 - 删除营业执照\r\n    deleteLIC(e){\r\n      console.log('删除了',e)\r\n      this.ruleForm.logoUrl = '';\r\n    },\r\n    handleAvatarSuccess(res, file) {\r\n      this.imageUrl = URL.createObjectURL(file.raw);\r\n    },\r\n    beforeAvatarUpload(file) {\r\n      console.log('file',file)\r\n      const isJPG = file.type === 'image/jpeg' || 'image/png';\r\n      const isLt2M = file.size / 1024 / 1024 < 2;\r\n\r\n      if (!isJPG) {\r\n        this.$message.error('上传头像图片只能是 JPG 或 PNG 格式!');\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error('上传头像图片大小不能超过 2MB!');\r\n      }\r\n      return isJPG && isLt2M;\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState([\r\n      'shop'\r\n    ]),\r\n    headers() {\r\n      return{\r\n        \"Authorization\": 'Bearer ' + getToken()\r\n      }\r\n    },\r\n  },\r\n}\r\n</script>\r\n<style>\r\n  .avatar-uploader .el-upload {\r\n    border: 1px dashed #d9d9d9;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    position: relative;\r\n    overflow: hidden;\r\n  }\r\n  .avatar-uploader .el-upload:hover {\r\n    border-color: #409EFF;\r\n  }\r\n  .avatar-uploader-icon {\r\n    font-size: 28px;\r\n    color: #8c939d;\r\n    width: 178px;\r\n    height: 178px;\r\n    line-height: 178px;\r\n    text-align: center;\r\n  }\r\n  .avatar {\r\n    width: 178px;\r\n    height: 178px;\r\n    display: block;\r\n  }\r\n</style>","import { render, staticRenderFns } from \"./shopInformation.vue?vue&type=template&id=6524bd55&\"\nimport script from \"./shopInformation.vue?vue&type=script&lang=js&\"\nexport * from \"./shopInformation.vue?vue&type=script&lang=js&\"\nimport style0 from \"./shopInformation.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"shopInformation.vue\"\nexport default component.exports"],"sourceRoot":""}