(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-da95"],{"3te+":function(t,e,o){"use strict";var a=o("zquO");o.n(a).a},BkEN:function(t,e,o){},FagV:function(t,e,o){"use strict";o.d(e,"a",function(){return n}),o.d(e,"d",function(){return s}),o.d(e,"b",function(){return i}),o.d(e,"c",function(){return r});var a=o("t3Un");function n(t){return Object(a.a)({url:"/product/business/stock/findByCondition",method:"post",data:t})}function s(t){return Object(a.a)({url:"/product/business/stock/updateStockInOut",method:"post",data:t})}function i(t){return Object(a.a)({url:"/product/business/stockRecord/findByCondition",method:"post",data:t})}function r(t){return Object(a.a)({url:"/product/business/stockRecord/findByDetailCondition",method:"post",data:t})}},Jdu8:function(t,e,o){"use strict";o.d(e,"g",function(){return n}),o.d(e,"j",function(){return s}),o.d(e,"b",function(){return i}),o.d(e,"d",function(){return r}),o.d(e,"i",function(){return l}),o.d(e,"h",function(){return c}),o.d(e,"c",function(){return u}),o.d(e,"e",function(){return d}),o.d(e,"f",function(){return p}),o.d(e,"a",function(){return h});var a=o("t3Un");function n(t){return Object(a.a)({url:"/product/business/inventory/findByCondition",method:"post",data:t})}function s(t){return Object(a.a)({url:"/product/business/inventoryDraft/findByCondition",method:"post",data:t})}function i(t){return Object(a.a)({url:"/product/business/inventoryDraft/genInventoryNo",method:"post",data:t})}function r(t){return Object(a.a)({url:"/product/business/inventoryDraft/add",method:"post",data:t})}function l(t){return Object(a.a)({url:"/product/business/inventory/add",method:"post",data:t})}function c(t){return Object(a.a)({url:"/product/business/inventory/findByCondition",method:"post",data:t})}function u(t){return Object(a.a)({url:"/product/business/inventory/findById?id="+t.id,method:"post",data:t})}function d(t){return Object(a.a)({url:"/product/business/inventoryDraft/findDraftById?id="+t.id,method:"post",data:t})}function p(t){return Object(a.a)({url:"/product/business/inventoryDraft/findDraftByCondition",method:"post",data:t})}function h(t){return Object(a.a)({url:"/product/business/inventoryDraft/delDetail",method:"post",data:t})}},VuFZ:function(t,e,o){"use strict";var a=o("BkEN");o.n(a).a},xGbm:function(t,e,o){"use strict";function a(t,e){/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var o={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var a in o)if(new RegExp("("+a+")").test(e)){var s=o[a]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?s:n(s))}return e}function n(t){return("00"+t).substr(t.length)}o.d(e,"a",function(){return a})},xTLD:function(t,e,o){"use strict";o.r(e);var a=o("FagV"),n=o("Jdu8"),s=o("xGbm"),i={inject:["reload"],filters:{formatCreateTime:function(t){var e=new Date(t);return Object(s.a)(e,"yyyy-MM-dd hh:mm:ss")}},data:function(){return{tips:1,tableList:[],totalCount:0,inventoryCount:0,inventoryCountLost:0,textarea:"",input:"",num:"--",elseMoney:!1,successMoney:!1,lostMoney:!1,id:"",list:{goodName:"",goodId:"",goodCode:""},code:"",userName:"",timer:null,tableData:[],tableDataPre:[],pageNum:1,page_size:10,total:0,totalAdd:0,dialogFormVisible:!1,updialogFormVisible:!1,category:"",outStock:{number:"",status:"",remark:"",productId:"",skuId:""},upStock:{number:"",status:"",remark:"",productId:"",skuId:""}}},created:function(){this.id=this.$route.query.id,this.getDetail()},methods:{goBack:function(){this.$store.dispatch("delView",this.$route),this.$router.push({path:"/inventoryManagement/inventoryList"})},getDetail:function(){var t=this,e=new Date;this.timer=e,Object(n.c)({id:this.id}).then(function(e){console.log("数据列表",e),t.tableData=e.data.list,t.code=e.data.inventoryNo,t.userName=e.data.userName,t.timer=e.data.createTime,t.textarea=e.data.inventoryRemark,t.totalCount=e.data.productCount,t.inventoryCount=e.data.profitCount,t.inventoryCountLost=e.data.lossCount})},tepreservation:function(){var t=this,e={inventoryNo:this.code,shopId:localStorage.getItem("shopId"),bUserId:localStorage.getItem("userId"),profitCount:this.inventoryCount,lossCount:this.inventoryCountLost,categoryCount:this.category,productCount:this.totalCount,inventoryRemark:this.textarea,list:this.tableData};Object(n.d)(e).then(function(e){console.log(e),200==e.code?(t.$message.success({type:"success",message:e.message}),t.reload()):t.$message.error({type:"error",message:e.message})})},complete:function(){var t=this,e={inventoryNo:this.code,shopId:localStorage.getItem("shopId"),bUserId:localStorage.getItem("userId"),profitCount:this.inventoryCount,lossCount:this.inventoryCountLost,categoryCount:this.category,productCount:this.totalCount,inventoryRemark:this.textarea,list:this.tableData};Object(n.i)(e).then(function(e){console.log(e),200==e.code?(t.$message.success({type:"success",message:e.message}),t.reload()):t.$message.error({type:"error",message:e.message})})},back:function(){this.$router.push({path:"/inventoryManagement/inventoryList"})},addCom:function(){var t=this;console.log(90),this.dialogFormVisible=!0,console.log(this.tableData),Object(n.j)({pageNum:this.pageNum,pageSize:this.page_size,productName:this.list.goodName,skuCode:this.list.skuCode,productCode:this.list.goodId}).then(function(e){t.tableList=e.data.list,t.totalAdd=e.data.total})},handleSelectionChange:function(t){console.log(t),this.multipleSelection=t,this.tableDataPre=t,this.totalCount=this.tableData.length},ck:function(t){var e=this;console.log(t),t.totalStockBefore>t.totalStockAfter?t.salePriceBefore="盘盈":t.totalStockBefore<t.totalStockAfter?t.salePriceBefore="盘亏":(t.totalStockBefore=t.totalStockAfter)&&(t.salePriceBefore="无差异"),this.tableData.forEach(function(t){e.tableData.push()}),console.log(this.tableData),this.inventoryCount=0,this.inventoryCountLost=0;for(var o=0;o<this.tableData.length;o++)console.log(this.tableData[o].salePriceBefore),"盘盈"==this.tableData[o].salePriceBefore?this.inventoryCount++:"盘亏"==this.tableData[o].salePriceBefore&&this.inventoryCountLost++},addType:function(){this.tableData=this.tableDataPre,this.tableData.forEach(function(t){t.salePriceBefore="--",t.remarks="",t.totalStockAfter=""});var t={},e=this.tableData.reduce(function(e,o){return!t[o.categoryId3]&&(t[o.categoryId3]=e.push(o)),e},[]);this.category=e.length,this.dialogFormVisible=!1,this.searchList()},result:function(){this.dialogFormVisible=!1,this.searchList()},searchList:function(){var t=this;Object(n.j)({pageNum:this.pageNum,pageSize:this.page_size,productName:this.list.goodName,skuCode:this.list.skuCode,productCode:this.list.goodId}).then(function(e){t.tableList=e.data.list,t.totalAdd=e.data.total})},getInventoryList:function(){var t=this;Object(n.g)({shopId:localStorage.getItem("shopId"),pageSize:this.page_size,pageNum:this.pageNum,inventoryNo:"",createTime:""}).then(function(e){t.tableData=e.data.list,t.total=e.data.total})},replacef:function(t,e,o){var a=t.target,n=this;if("SPAN"==a.nodeName){var s=document.createElement("input");s.className="myStyle",s.value=a.innerHTML,a.parentNode.replaceChild(s,a),s.focus(),s.onblur=function(){a.innerHTML=s.value,s.parentNode.replaceChild(a,s),o.totalStockBefore>a.innerHTML?(n.successMoney=!0,n.lostMoney=!1,n.elseMoney=!1):o.totalStockBefore<a.innerHTML?(n.lostMoney=!0,n.successMoney=!1,n.elseMoney=!1):(o.totalStockBefore=a.innerHTML)&&(n.elseMoney=!0,n.successMoney=!1,n.lostMoney=!1)}}},reset:function(){this.list={goodName:"",goodId:"",goodCode:""},this.searchList()},handleSizeChange:function(t){this.page_size=t,this.searchList()},pageChange:function(t){this.pageNum=t,this.searchList()},outStockButton:function(){var t=this;"number"==typeof this.outStock.number?this.outStock.number>this.outStock.total?this.$notify.error({title:"错误",message:"出库量不能大于可用库存量"}):""!=this.outStock.status?Object(a.d)({shopId:localStorage.getItem("shopId"),productId:this.outStock.productId,skuId:this.outStock.skuId,type:this.outStock.status,totalStockChange:-this.outStock.number,remark:this.outStock.remark,creater:localStorage.getItem("userId")}).then(function(e){200==e.code?(t.$notify({title:"成功",message:"出库成功",type:"success"}),t.dialogFormVisible=!1,t.outStock.status="",t.outStock.skuId="",t.outStock.number="",t.outStock.remark="",t.searchList()):t.$notify.error({title:"失败",message:"出库失败"})}):this.$notify.error({title:"错误",message:"请选择出库类型"}):this.$notify.error({title:"错误",message:"请输入数字"})},updateProduct:function(t,e){this.updialogFormVisible=!0,this.upStock.productId=e.productId,this.upStock.skuId=e.code},upStockButton:function(){var t=this;"number"==typeof this.upStock.number?""!=this.upStock.status?Object(a.d)({shopId:localStorage.getItem("shopId"),productId:this.upStock.productId,skuId:this.upStock.skuId,type:this.upStock.status,totalStockChange:this.upStock.number,remark:this.upStock.remark,creater:localStorage.getItem("userId")}).then(function(e){200==e.code?(t.$notify({title:"成功",message:"入库成功",type:"success"}),t.updialogFormVisible=!1,t.upStock.status="",t.upStock.skuId="",t.upStock.number="",t.upStock.remark="",t.searchList()):t.$notify.error({title:"失败",message:"入库失败"})}):this.$notify.error({title:"错误",message:"请选择入库类型"}):this.$notify.error({title:"错误",message:"请输入数字"})}}},r=(o("3te+"),o("VuFZ"),o("KHd+")),l=Object(r.a)(i,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"app-container"},[o("el-radio-group",{model:{value:t.tips,callback:function(e){t.tips=e},expression:"tips"}},[o("el-radio-button",{attrs:{label:"1"}},[t._v("盘点单")])],1),t._v(" "),o("span",{staticClass:"back",on:{click:t.back}},[t._v("返回上一页")]),t._v(" "),o("el-card",{staticClass:"operate-container",attrs:{shadow:"never"}},[o("div",{staticStyle:{"margin-top":"15px"}},[o("el-form",{attrs:{inline:!0,size:"small","label-width":"120px"}},[o("el-form-item",{attrs:{label:"编号："},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(t.code)+"\n            ")]}}])}),t._v(" "),o("el-form-item",{attrs:{label:"盘点仓库："},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              默认仓库\n            ")]}}])}),t._v(" "),o("el-form-item",{attrs:{label:"盘点人："},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(t.userName)+"\n            ")]}}])}),t._v(" "),o("el-form-item",{attrs:{label:"盘点时间："},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(t._f("formatCreateTime")(t.timer))+"\n            ")]}}])})],1)],1)]),t._v(" "),o("el-card",{staticClass:"operate-container",staticStyle:{"margin-top":"10px"},attrs:{shadow:"never"}},[o("i",{staticClass:"el-icon-tickets"}),t._v(" "),o("span",[t._v("数据列表")])]),t._v(" "),o("el-card",{staticClass:"operate-container",staticStyle:{"margin-top":"10px"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[o("el-table-column",{attrs:{type:"index",width:"50",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{label:"商品名称","min-width":"200","show-overflow-tooltip":"",prop:"name",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n   "+t._s(e.row.productName+"("+e.row.skuName+")")+"\n")]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"商品编码",width:"100",prop:"productCode",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{label:"规格编码",width:"140",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(""==e.row.skuCode?"--":e.row.skuCode)+"\n          ")]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"分类",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.categoryName3)+"\n          ")]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"库存总数",width:"150",prop:"totalStockBefore",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{label:"盘点数量",width:"180",prop:"totalStockAfter",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{label:"盘盈盘亏",width:"180",prop:"salePriceBefore",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.type?o("span",[t._v("盘盈")]):t._e(),t._v(" "),1==e.row.type?o("span",[t._v("无变化")]):t._e(),t._v(" "),2==e.row.type?o("span",[t._v("盘亏")]):t._e()]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"备注",width:"150",prop:"lockStock",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.remark)+"\n          ")]}}])})],1),t._v(" "),o("div",{staticClass:"total"},[o("span",[t._v("合计：")]),t._v(" "),o("span",[t._v("已添加"+t._s(t.totalCount)+"条")]),t._v(" "),o("span",[t._v("盘盈："+t._s(t.inventoryCount))]),t._v(" "),o("span",[t._v("盘亏："+t._s(t.inventoryCountLost))])]),t._v(" "),o("div",{staticClass:"totaltextarea"},[o("el-input",{attrs:{type:"textarea",disabled:!0,autosize:{minRows:2,maxRows:6},placeholder:"请输入内容"},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}})],1)],1),t._v(" "),o("el-card",{staticClass:"operate-container",staticStyle:{"margin-top":"10px"}},[o("el-button",{staticStyle:{width:"200px"},on:{click:t.goBack}},[t._v("返回")])],1),t._v(" "),o("el-dialog",{attrs:{title:"添加商品",visible:t.dialogFormVisible,width:"1220px",height:"752px"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[o("div",[o("el-card",{staticClass:"filter-container",attrs:{shadow:"never"}},[o("div",[o("i",{staticClass:"el-icon-search"}),t._v(" "),o("span",[t._v("筛选搜索")]),t._v(" "),o("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:t.searchList}},[t._v("\n              查询\n            ")]),t._v(" "),o("el-button",{staticStyle:{float:"right","margin-right":"15px"},attrs:{size:"small"},on:{click:t.reset}},[t._v("\n              重置\n            ")])],1),t._v(" "),o("div",{staticStyle:{"margin-top":"15px"}},[o("el-form",{attrs:{inline:!0,model:t.list,size:"small","label-width":"140px"}},[o("el-form-item",{attrs:{label:"商品名称："}},[o("el-input",{staticStyle:{width:"203px"},attrs:{clearable:"",placeholder:"商品名称"},model:{value:t.list.goodName,callback:function(e){t.$set(t.list,"goodName",e)},expression:"list.goodName"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"商品编码："}},[o("el-input",{staticStyle:{width:"203px"},attrs:{clearable:"",placeholder:"商品编码"},model:{value:t.list.goodId,callback:function(e){t.$set(t.list,"goodId",e)},expression:"list.goodId"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"规格编码："}},[o("el-input",{staticStyle:{width:"203px"},attrs:{clearable:"",placeholder:"规格编码："},model:{value:t.list.goodCode,callback:function(e){t.$set(t.list,"goodCode",e)},expression:"list.goodCode"}})],1)],1)],1)]),t._v(" "),o("div",{staticClass:"table-container"},[o("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableList,border:""},on:{"selection-change":t.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"60",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{label:"分类",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.categoryName3)+"\n              ")]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"商品名称",width:"520",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.productName)+"\n              ")]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"商品编码",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.productCode)+"\n              ")]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"规格编码",width:"200","show-overflow-tooltip":"",prop:"name",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.skuCode)+"\n              ")]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"库存总数",width:"00",prop:"sumStock",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.totalStockBefore)+"\n              ")]}}])})],1)],1),t._v(" "),o("div",{staticClass:"fixedB"},[o("div",{staticClass:"testButton"},[o("el-button",{on:{click:t.result}},[t._v("取消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.addType}},[t._v("确定")])],1),t._v(" "),o("el-pagination",{staticStyle:{"margin-top":"10px","margin-left":"20px"},attrs:{background:"",layout:"total,sizes,prev,pager,next,jumper","page-size":t.page_size,"page-sizes":[10,30,50,100],"current-page":t.pageNum,total:t.totalAdd},on:{"size-change":t.handleSizeChange,"current-change":t.pageChange}})],1)],1)]),t._v(" "),o("div",{staticClass:"fixedB"},[o("el-pagination",{staticStyle:{"margin-top":"10px","margin-left":"20px"},attrs:{background:"",layout:"total,sizes,prev,pager,next,jumper","page-size":t.page_size,"page-sizes":[15,30,50,100],"current-page":t.pageNum,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.pageChange}})],1)],1)},[],!1,null,"e8a29e0e",null);l.options.__file="inventoryDetail.vue";e.default=l.exports},zquO:function(t,e,o){}}]);
//# sourceMappingURL=chunk-da95.49d70d4e.js.map