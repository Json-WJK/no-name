(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-58ed"],{"/wAP":function(t,e,i){},"2SQV":function(t,e,i){"use strict";var s=i("osza");i.n(s).a},"5k57":function(t,e,i){"use strict";i.d(e,"a",function(){return n});var s=i("oF3Q"),a=i.n(s);function n(t){var e=arguments,i="";return a()(t).forEach(function(t){"[object Object]"==Object.prototype.toString.call(t[1])?e.callee(t[1]):i+=t.join("=")+"&"}),i.substring(0,i.length-1)}},CerB:function(t,e,i){"use strict";i.r(e);var s=i("5k57"),a=i("nP1G"),n={props:["status","shop","user"],data:function(){return{list:[],showNew:!1,hideUpload:!1,showImgDia:!1,loading:!1,action:"",newForm:{shopId:this.shop.shopId,title:"",wxMomentsTitle:"",wxFriendsTitle:"",wxFriendsContent:"",recruitUrl:""},rules:{title:[{required:!0,message:"请输入招募标题",trigger:"blur"}],recruitUrl:[{required:!0,message:"请上传招募宣传图",trigger:"blur"}]},addLoading:!1}},created:function(){this.getList(),this.action="/sys/business/shopChannel/uploadRecruitImage?shopId="+this.shop.shopId},mounted:function(){new this.clipboard(".cobyOrderSn")},methods:{getList:function(){var t=this;this.loading=!0,Object(a.k)({shopId:this.shop.shopId,pageSize:50,pageNum:1}).then(function(e){console.log("获取招募列表",e),t.list=e.data.list,t.loading=!1})},showDetails:function(t){console.log(t,this.$router),this.$router.push({path:"/distributionManagement/distributor/preview",query:{id:t.id}})},submitForm:function(t){var e=this;this.list.length>50?this.$notify.error({title:"错误",message:"分销员招募模板最多为50条"}):this.$refs[t].validate(function(t){t&&(e.addLoading=!0,Object(a.a)(e.newForm).then(function(t){console.log("添加模板",t),200==t.code?(e.getList(),e.$message({message:"新增成功",type:"success"}),e.showNew=!1,setTimeout(function(){e.addLoading=!1},1500)):(e.$message.error(t.message),e.addLoading=!1)}))})},goToNew:function(){this.showNew=!0},setRecruit:function(t){var e=this,i={};i.shopId=this.shop.shopId,i.id=t.id,i.isDefault=1,Object(a.s)(i).then(function(t){console.log("设置默认",t),1==t.data?(e.$message({message:"设置成功",type:"success"}),e.getList()):e.$message.error(t.message)})},deleteItem:function(t){var e=this,i={};i.shopId=this.shop.shopId,i.id=t.id,this.$confirm("是否确定移除该推广链接？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log(i,"----"),Object(a.g)(i).then(function(t){1==t.data?(e.getList(),e.$message({message:"删除成功",type:"success"})):e.$message.error(t.message)})}).catch(function(){})},getPic:function(t){var e={shopId:this.shop.shopId,type:1,id:t.id,fileName:t.recruitUrl},i=Object(s.a)(e);window.open("/sys/business/shopChannel/downloadRecruitImage?"+i)},getQrcode:function(t){var e={shopId:this.shop.shopId,type:2,id:t.id,fileName:t.herfUrl},i=Object(s.a)(e);window.open("/sys/business/shopChannel/downloadRecruitImage?"+i)},stopUpload:function(t,e){this.hideUpload=e.length>=1},handleRemove:function(t,e){this.hideUpload=e.length>=1,this.newForm.recruitUrl=""},beforeAvatarUpload:function(t){var e=t.size/1024/1024<2;return e||this.$message.error("上传图片大小不能超过 2MB!"),e},handleAvatarSuccess:function(t,e,i){this.hideUpload=i.length>=1,console.log(this.hideUpload),this.newForm.recruitUrl=t.data[0].name},copyLink:function(){this.$message({message:"复制成功",type:"success"})}},computed:{startTime:function(){return this.status}},watch:{}},o=(i("QZsB"),i("KHd+")),l=Object(o.a)(n,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-card",{staticStyle:{"padding-bottom":"20px"},attrs:{shadow:"never"}},[s("div",[s("el-button",{attrs:{type:"primary"},on:{click:t.goToNew}},[t._v("新增模板")])],1),t._v(" "),s("div",{staticStyle:{"margin-top":"20px"}},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.list,border:""}},[s("el-table-column",{attrs:{label:"宣传图"},scopedSlots:t._u([{key:"default",fn:function(t){return[s("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.recruitUrl,fit:"fill"}})]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"title",label:"招募标题"}}),t._v(" "),s("el-table-column",{attrs:{label:"推广链接"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"disStr"},[s("span",[t._v(t._s(e.row.herfUrl))]),t._v(" "),s("el-button",{staticClass:"cobyOrderSn",staticStyle:{"margin-left":"4px"},attrs:{plain:"",type:"primary",size:"mini","data-clipboard-text":e.row.herfUrl},on:{click:t.copyLink}},[t._v("复制链接")])],1)]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){t.getPic(e.row)}}},[t._v("下载宣传图")]),t._v(" "),s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){t.getQrcode(e.row)}}},[t._v("下载二维码")]),t._v(" "),s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){t.showDetails(e.row)}}},[t._v("预览")]),t._v(" "),1==e.row.isDefault?s("el-button",{staticStyle:{color:"#909399"},attrs:{type:"text",size:"small"}},[t._v("默认")]):t._e(),t._v(" "),1!=e.row.isDefault?s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){t.setRecruit(e.row)}}},[t._v("设置默认")]):t._e(),t._v(" "),1!=e.row.isDefault?s("el-button",{staticStyle:{color:"#909399"},attrs:{type:"text",size:"small"},on:{click:function(i){t.deleteItem(e.row)}}},[t._v("删除")]):t._e()]}}])})],1)],1)]),t._v(" "),s("el-dialog",{attrs:{title:"新增推广链接",visible:t.showNew,center:""},on:{"update:visible":function(e){t.showNew=e}}},[s("div",[s("el-form",{ref:"ruleForm",staticStyle:{width:"70%"},attrs:{model:t.newForm,rules:t.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"招募标题：",prop:"title"}},[s("el-input",{attrs:{maxlength:"10",placeholder:"招募标题不能超过10个字；招募标题不能为空","show-word-limit":""},model:{value:t.newForm.title,callback:function(e){t.$set(t.newForm,"title",e)},expression:"newForm.title"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"宣传图：",prop:"recruitUrl"}},[s("el-upload",{class:{hide:t.hideUpload},attrs:{action:t.action,"list-type":"picture-card",limit:1,name:"files",accept:"image/png,image/jpg,image/jpeg","on-change":t.stopUpload,"on-remove":t.handleRemove,"before-upload":t.beforeAvatarUpload,"on-success":t.handleAvatarSuccess}},[s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("为保证手机端页面美观，支持jpg、png、jpeg 格式，建议尺寸 750*1334尺寸，最多上传一张；")]),t._v(" "),s("i",{staticClass:"el-icon-plus"})])],1)],1)],1),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.showNew=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{loading:t.addLoading,type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("立即创建")])],1)]),t._v(" "),s("el-dialog",{attrs:{title:"分享示例",visible:t.showImgDia,center:""},on:{"update:visible":function(e){t.showImgDia=e}}},[s("img",{attrs:{src:i("beDQ"),alt:""}})])],1)},[],!1,null,"1dd089aa",null);l.options.__file="distributorRecruiting.vue";e.default=l.exports},E8gZ:function(t,e,i){var s=i("jmDH"),a=i("w6GO"),n=i("NsO/"),o=i("NV0k").f;t.exports=function(t){return function(e){for(var i,l=n(e),r=a(l),c=r.length,u=0,d=[];c>u;)i=r[u++],s&&!o.call(l,i)||d.push(t?[i,l[i]]:l[i]);return d}}},OBPw:function(t,e,i){"use strict";var s=i("bqmX");i.n(s).a},QZsB:function(t,e,i){"use strict";var s=i("/wAP");i.n(s).a},beDQ:function(t,e,i){t.exports=i.p+"static/img/distriShowIMg.751c427.png"},bqmX:function(t,e,i){},"c+mu":function(t,e,i){"use strict";var s=i("tbI0");i.n(s).a},dCWa:function(t,e,i){"use strict";i.r(e);var s=i("nP1G"),a={props:["status","shop","user"],data:function(){return{list:{channelUsernickName:"",channelUserPhone:"",registerTime:"",status:""},statusList:[{value:"",label:"全部"},{value:"0",label:"待审核"},{value:"2",label:"已驳回"},{value:"1",label:"已通过"}],groupList:[],form:{reason:"",groupId:""},userId:"",orderNo:"",dialogFormVisibleTwo:!1,dialogFormVisible:!1,dialogFormVisibleOne:!1,dialogFormVisibleReason:!1,auditFalseReason:"",id:"",tableList:[],pageNum:1,page_size:10,total:0,loading:!1,loadingDia:!1,pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(t){var e=new Date;e.setTime(e.getTime()),e.setHours(e.getHours()),e.setMinutes(e.getMinutes()),e.setSeconds(e.getSeconds());var i=new Date;i.setTime(i.getTime()),i.setHours(0),i.setMinutes(0),i.setSeconds(0),t.$emit("pick",[i,e])}},{text:"昨天",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),e.setHours(23),e.setMinutes(59),e.setSeconds(59);var i=new Date;i.setTime(i.getTime()-864e5),i.setHours(0),i.setMinutes(0),i.setSeconds(0),t.$emit("pick",[i,e])}},{text:"最近一周",onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-6048e5),t.$emit("pick",[i,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-2592e6),t.$emit("pick",[i,e])}}]}}},created:function(){},mounted:function(){},methods:{searchGroupList:function(){var t=this;Object(s.p)({shopId:this.shop.shopId}).then(function(e){200==e.code?t.groupList=e.data:t.$notify.error({title:"错误",message:e.message})}).catch(function(t){console.log(t)})},searchList:function(){var t=this;this.loading=!0,Object(s.l)({shopId:this.shop.shopId,pageNum:this.pageNum,pageSize:this.page_size,channelUsernickName:this.list.channelUsernickName,channelUserPhone:this.list.channelUserPhone,applyState:this.list.status,startCreateTime:null==this.list.registerTime?"":this.list.registerTime[0],endCreateTime:null==this.list.registerTime?"":this.list.registerTime[1]}).then(function(e){200==e.code?(t.tableList=e.data.list,t.total=e.data.total,t.loading=!1):t.$notify.error({title:"失败",message:e.message})})},showReason:function(t){this.dialogFormVisibleReason=!0,this.auditFalseReason=t.applyComment},auditTrue:function(t,e){1==t&&(this.dialogFormVisible=!0),2==t&&(this.dialogFormVisibleOne=!0),this.id=e.id,this.form.reason="",this.form.groupId="";var i=this.groupList.find(function(t){return 1==t.isDefault});this.form.groupId=i.id,this.loadingDia=!1},audit:function(t){var e=this;1==t&&("1",Object(s.o)({shopId:this.shop.shopId,groupId:this.form.groupId,count:1}).then(function(t){1==t.data?(e.loadingDia=!0,Object(s.d)({shopId:e.shop.shopId,id:e.id,applyState:1,channelGroupId:e.form.groupId}).then(function(t){1==t.data?(e.$notify({title:"成功",type:"success",message:"审核成功"}),e.loadingDia=!1,e.dialogFormVisible=!1,e.searchList()):e.$notify.error({title:"失败",message:t.message})})):e.$notify.error({title:"失败",message:t.message})})),"2"!=t||""!=this.form.reason?2==t&&(this.loadingDia=!0,Object(s.d)({shopId:this.shop.shopId,id:this.id,applyState:2,applyComment:this.form.reason}).then(function(t){1==t.data?(e.$notify({title:"成功",type:"success",message:"驳回操作成功"}),e.loadingDia=!1,e.dialogFormVisibleOne=!1,e.searchList()):e.$notify.error({title:"失败",message:t.message})})):this.$notify.error({title:"失败",message:"驳回原因不能为空"})},reset:function(){this.list={channelUsernickName:"",channelUserPhone:"",registerTime:"",status:""},this.searchList()},handleSizeChange:function(t){this.page_size=t,this.searchList()},pageChange:function(t){this.pageNum=t,this.searchList()}},computed:{startTime:function(){return this.status}},watch:{startTime:function(t,e){return this.searchList(),this.searchGroupList(),t}}},n=(i("OBPw"),i("KHd+")),o=Object(n.a)(a,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-card",{staticClass:"filter-container",attrs:{shadow:"never"}},[i("div",[i("i",{staticClass:"el-icon-search"}),t._v(" "),i("span",[t._v("筛选搜索")]),t._v(" "),i("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:t.searchList}},[t._v("\n        查询\n      ")]),t._v(" "),i("el-button",{staticStyle:{float:"right","margin-right":"15px"},attrs:{size:"small"},on:{click:t.reset}},[t._v("\n        重置\n      ")])],1),t._v(" "),i("div",{staticStyle:{"margin-top":"40px"}},[i("el-form",{attrs:{inline:!0,model:t.list,size:"small","label-width":"140px"}},[i("el-form-item",{attrs:{label:"分销员昵称："}},[i("el-input",{attrs:{clearable:"",placeholder:"分销员昵称"},model:{value:t.list.channelUsernickName,callback:function(e){t.$set(t.list,"channelUsernickName",e)},expression:"list.channelUsernickName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"分销员手机号："}},[i("el-input",{attrs:{clearable:"",placeholder:"分销员手机号"},model:{value:t.list.channelUserPhone,callback:function(e){t.$set(t.list,"channelUserPhone",e)},expression:"list.channelUserPhone"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"审核状态："}},[i("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.list.status,callback:function(e){t.$set(t.list,"status",e)},expression:"list.status"}},t._l(t.statusList,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"申请时间："}},[i("el-date-picker",{attrs:{type:"datetimerange","value-format":"yyyy-MM-dd HH-mm-ss","picker-options":t.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.list.registerTime,callback:function(e){t.$set(t.list,"registerTime",e)},expression:"list.registerTime"}})],1)],1)],1)]),t._v(" "),i("el-card",{staticClass:"operate-container",attrs:{shadow:"never"}},[i("i",{staticClass:"el-icon-tickets"}),t._v(" "),i("span",[t._v("数据列表")])]),t._v(" "),i("el-card",{staticClass:"operate-container",attrs:{shadow:"never"}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableList,border:""}},[i("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),i("el-table-column",{attrs:{label:"分销员昵称","min-width":"140",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.channelUsernickName))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"分销员手机号",width:"120",prop:"channelUserPhone",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{label:"邀请方昵称",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(""==e.row.inviternickName?"--":e.row.inviternickName)+"\n        ")]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"邀请方手机号",width:"130",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(""==e.row.inviterPhone?"--":e.row.inviterPhone)+"\n        ")]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"130",align:"center"},scopedSlots:t._u([{key:"header",fn:function(e){return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"累计交易笔数是指该用户支付过的订单笔数，剔除退款，不剔除部分退款",placement:"top"}},[i("el-button",{staticStyle:{color:"#909399","font-weight":"600"},attrs:{type:"text"}},[t._v("累计交易笔数"),i("i",{staticClass:"el-icon-question"})])],1)]}},{key:"default",fn:function(e){return[t._v("\n          "+t._s(""==e.row.orderTotal?"--":e.row.orderTotal)+"\n        ")]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"150",align:"center"},scopedSlots:t._u([{key:"header",fn:function(e){return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"累计自购金额是指该用户的实付金额，剔除退款",placement:"top"}},[i("el-button",{staticStyle:{color:"#909399","font-weight":"600"},attrs:{type:"text"}},[t._v("累计自购金额"),i("i",{staticClass:"el-icon-question"})])],1)]}},{key:"default",fn:function(e){return[t._v("\n          "+t._s(""==e.row.orderAmount?"--":e.row.orderAmount)+"\n        ")]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"申请加入时间",width:"160",prop:"createTime",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{label:"状态",width:"120",prop:"applyState",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.applyState?i("span",[t._v("待审核")]):t._e(),t._v(" "),1==e.row.applyState?i("span",[t._v("已通过")]):t._e(),t._v(" "),2==e.row.applyState?i("span",[t._v("已驳回")]):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作","min-width":"250",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.applyState?i("el-button",{attrs:{type:"text"},on:{click:function(i){t.auditTrue(1,e.row)}}},[t._v("审核通过")]):t._e(),t._v(" "),0==e.row.applyState?i("el-button",{attrs:{type:"text"},on:{click:function(i){t.auditTrue(2,e.row)}}},[t._v("驳回")]):t._e(),t._v(" "),2==e.row.applyState?i("el-button",{attrs:{type:"text"},on:{click:function(i){t.showReason(e.row)}}},[t._v("查看驳回原因")]):t._e()]}}])})],1),t._v(" "),i("div",{staticClass:"flex-row-end"},[i("el-pagination",{staticStyle:{"margin-top":"10px","margin-left":"20px"},attrs:{background:"",layout:"total,sizes,prev,pager,next,jumper","page-size":t.page_size,"page-sizes":[10,30,50],"current-page":t.pageNum,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.pageChange}})],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"分销员审核",visible:t.dialogFormVisible,width:"40%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("span",{staticStyle:{display:"flex",margin:"0 45px 20px","font-weight":"600"}},[t._v("是否通过该分销员的申请？如果同意请选择所属分组")]),t._v(" "),i("el-form",{attrs:{size:"small","label-width":"140px"}},[i("el-form-item",{attrs:{label:"按分组查看："}},[i("el-select",{attrs:{placeholder:"默认分组"},model:{value:t.form.groupId,callback:function(e){t.$set(t.form,"groupId",e)},expression:"form.groupId"}},t._l(t.groupList,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1),t._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingDia,expression:"loadingDia"}],staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.audit(1)}}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"驳回申请",visible:t.dialogFormVisibleOne},on:{"update:visible":function(e){t.dialogFormVisibleOne=e}}},[i("el-form",{attrs:{"label-width":"80px",model:t.form}},[i("el-form-item",{attrs:{label:"驳回原因"}},[i("el-input",{attrs:{"show-word-limit":"",maxlength:"20"},model:{value:t.form.reason,callback:function(e){t.$set(t.form,"reason","string"==typeof e?e.trim():e)},expression:"form.reason"}})],1)],1),t._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingDia,expression:"loadingDia"}],staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisibleOne=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.audit(2)}}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"查看驳回原因",visible:t.dialogFormVisibleReason,width:"30%"},on:{"update:visible":function(e){t.dialogFormVisibleReason=e}}},[i("span",{staticStyle:{"margin-left":"20px"}},[t._v(t._s(t.auditFalseReason))]),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisibleReason=!1}}},[t._v("关闭")])],1)])],1)},[],!1,null,"78f87bb6",null);o.options.__file="distributorAudit.vue";e.default=o.exports},gwdp:function(t,e,i){"use strict";i.r(e);var s=i("QbLZ"),a=i.n(s),n=i("L2JU"),o=i("qoqb"),l=i("dCWa"),r=i("CerB"),c=i("oMLw"),u={data:function(){return{activeName:"first"}},created:function(){this.$route.query.activeName&&(this.activeName=this.$route.query.activeName)},methods:{handleClick:function(t,e){console.log(t,e)}},components:{DistributorList:o.default,DistributorAudit:l.default,DistributorRecruiting:r.default,DistributorGrouping:c.default},computed:a()({},Object(n.c)(["user","shop"]))},d=(i("2SQV"),i("KHd+")),p=Object(d.a)(u,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"分销员列表",name:"first"}},[i("distributor-list",{attrs:{status:t.activeName,user:t.user,shop:t.shop}})],1),t._v(" "),i("el-tab-pane",{attrs:{label:"分销员分组",name:"four"}},[i("distributor-grouping",{attrs:{status:t.activeName,user:t.user,shop:t.shop}})],1),t._v(" "),i("el-tab-pane",{attrs:{label:"分销员审核",name:"second"}},[i("distributor-audit",{attrs:{status:t.activeName,user:t.user,shop:t.shop}})],1),t._v(" "),i("el-tab-pane",{attrs:{label:"分销员招募",name:"three"}},[i("distributor-recruiting",{attrs:{status:t.activeName,user:t.user,shop:t.shop}})],1)],1)],1)},[],!1,null,"219a6937",null);p.options.__file="index.vue";e.default=p.exports},nGDx:function(t,e,i){var s=i("Y7ZC"),a=i("E8gZ")(!0);s(s.S,"Object",{entries:function(t){return a(t)}})},oF3Q:function(t,e,i){t.exports={default:i("tgZa"),__esModule:!0}},osza:function(t,e,i){},qoqb:function(t,e,i){"use strict";i.r(e);var s=i("5k57"),a=i("nP1G"),n={props:["status","user","shop"],data:function(){return{list:{channelUsernickName:"",channelUserPhone:"",invitationState:"",inviternickName:"",inviterPhone:"",groupId:"",registerTime:""},group:{groupId:""},dialogFormVisible:!1,dialogFormVisibleOne:!1,dialogFormVisibleGroup:!1,id:"",tableList:[],multipleSelection:[],groupList:[],pageNum:1,page_size:10,total:0,loading:!1,pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(t){var e=new Date;e.setTime(e.getTime()),e.setHours(e.getHours()),e.setMinutes(e.getMinutes()),e.setSeconds(e.getSeconds());var i=new Date;i.setTime(i.getTime()),i.setHours(0),i.setMinutes(0),i.setSeconds(0),t.$emit("pick",[i,e])}},{text:"昨天",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),e.setHours(23),e.setMinutes(59),e.setSeconds(59);var i=new Date;i.setTime(i.getTime()-864e5),i.setHours(0),i.setMinutes(0),i.setSeconds(0),t.$emit("pick",[i,e])}},{text:"最近一周",onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-6048e5),t.$emit("pick",[i,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-2592e6),t.$emit("pick",[i,e])}}]},invitationStateList:[{value:"",label:"全部"},{value:"0",label:"无"},{value:"1",label:"有"}]}},created:function(){this.searchList(),this.searchGroupList()},mounted:function(){},methods:{searchGroupList:function(){var t=this;Object(a.p)({shopId:this.shop.shopId}).then(function(e){200==e.code?t.groupList=e.data:t.$notify.error({title:"错误",message:e.message})}).catch(function(t){console.log(t)})},searchList:function(){var t=this;this.loading=!0,Object(a.c)({shopId:this.shop.shopId,pageNum:this.pageNum,pageSize:this.page_size,channelUsernickName:this.list.channelUsernickName,channelUserPhone:this.list.channelUserPhone,invitationState:this.list.invitationState,inviterPhone:this.list.inviterPhone,inviternickName:this.list.inviternickName,groupId:this.list.groupId,startCreateTime:null==this.list.registerTime?"":this.list.registerTime[0],endCreateTime:null==this.list.registerTime?"":this.list.registerTime[1]}).then(function(e){200==e.code?(t.tableList=e.data.list,t.total=e.data.total,t.loading=!1):t.$notify.error({title:"错误",message:e.message})}).catch(function(t){console.log(t)})},handleSelectionChange:function(t){this.multipleSelection=t},changeGroup:function(){if(0!=this.multipleSelection.length){this.dialogFormVisibleGroup=!0;var t=this.groupList.find(function(t){return 1==t.isDefault});this.group.groupId=t.id}else this.$message({message:"请选择要操作的分销员",type:"warning",duration:1e3})},setDistriGroup:function(){var t=this;Object(a.o)({shopId:this.shop.shopId,groupId:this.group.groupId,count:this.multipleSelection.length}).then(function(e){if(1==e.data){var i=t.multipleSelection.map(function(t){return t.cUserId});Object(a.b)({shopId:t.shop.shopId,groupId:t.group.groupId,ids:i}).then(function(e){1==e.data?(t.$notify({title:"成功",type:"success",message:e.message}),t.dialogFormVisibleGroup=!1,t.searchList()):t.$notify.error({title:"失败",message:e.message})})}else t.$notify.error({title:"错误",message:e.message})})},showDetails:function(t){this.$router.push({path:"/distributionManagement/distributor/juniorDistributor",query:{id:t.cUserId,channelUsernickName:t.channelUsernickName,channelGroupName:t.channelGroupName,channelUserPhone:t.channelUserPhone}})},auditTrue:function(t,e){0==t&&(this.dialogFormVisible=!0),1==t&&(this.dialogFormVisibleOne=!0),this.id=e.id},audit:function(t){var e=this;Object(a.t)({shopId:this.shop.shopId,id:this.id,state:t}).then(function(t){200==t.code?(e.$notify({title:"成功",type:"success",message:"操作成功",duration:3e3}),e.dialogFormVisible=!1,e.dialogFormVisibleOne=!1,e.searchList()):e.$notify.error({message:t.message,title:"失败"})}).catch(function(t){console.log(t)})},exportExcel:function(){var t={shopId:this.shop.shopId,pageNum:this.pageNum,pageSize:this.page_size,channelUsernickName:this.list.channelUsernickName,channelUserPhone:this.list.channelUserPhone,invitationState:this.list.invitationState,inviterPhone:this.list.inviterPhone,inviternickName:this.list.inviternickName,groupId:this.list.groupId,startCreateTime:null==this.list.registerTime?"":this.list.registerTime[0],endCreateTime:null==this.list.registerTime?"":this.list.registerTime[1]},e=Object(s.a)(t);window.open("/sys/business/shopChannel/exportChannelUserInfo?"+e)},handleClose:function(){this.dialogFormVisibleTwo=!1,this.form.name="",this.form.orderID=void 0,this.orderNo="",this.form.month="",this.form.buyTime=""},reset:function(){this.list={channelUsernickName:"",channelUserPhone:"",invitationState:"",inviternickName:"",inviterPhone:"",groupId:"",registerTime:""},this.searchList()},handleSizeChange:function(t){this.page_size=t,this.searchList()},pageChange:function(t){this.pageNum=t,this.searchList()}},computed:{startTime:function(){return this.status}},watch:{}},o=(i("c+mu"),i("KHd+")),l=Object(o.a)(n,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-card",{staticClass:"filter-container",attrs:{shadow:"never"}},[i("div",[i("i",{staticClass:"el-icon-search"}),t._v(" "),i("span",[t._v("筛选搜索")]),t._v(" "),i("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:t.searchList}},[t._v("\n        查询\n      ")]),t._v(" "),i("el-button",{staticStyle:{float:"right","margin-right":"15px"},attrs:{size:"small"},on:{click:t.reset}},[t._v("\n        重置\n      ")])],1),t._v(" "),i("div",{staticStyle:{"margin-top":"40px"}},[i("el-form",{attrs:{inline:!0,model:t.list,size:"small","label-width":"140px"}},[i("el-form-item",{attrs:{label:"分销员昵称："}},[i("el-input",{attrs:{clearable:"",placeholder:"分销员昵称"},model:{value:t.list.channelUsernickName,callback:function(e){t.$set(t.list,"channelUsernickName",e)},expression:"list.channelUsernickName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"分销员手机号："}},[i("el-input",{attrs:{clearable:"",placeholder:"分销员手机号"},model:{value:t.list.channelUserPhone,callback:function(e){t.$set(t.list,"channelUserPhone",e)},expression:"list.channelUserPhone"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"邀请方昵称："}},[i("el-input",{attrs:{clearable:"",placeholder:"邀请方昵称"},model:{value:t.list.inviternickName,callback:function(e){t.$set(t.list,"inviternickName",e)},expression:"list.inviternickName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"邀请方手机号："}},[i("el-input",{attrs:{clearable:"",placeholder:"邀请方手机号"},model:{value:t.list.inviterPhone,callback:function(e){t.$set(t.list,"inviterPhone",e)},expression:"list.inviterPhone"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"是否有邀请方："}},[i("el-select",{attrs:{clearable:"",placeholder:"默认选择全部"},model:{value:t.list.invitationState,callback:function(e){t.$set(t.list,"invitationState",e)},expression:"list.invitationState"}},t._l(t.invitationStateList,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"加入时间："}},[i("el-date-picker",{attrs:{type:"datetimerange","value-format":"yyyy-MM-dd HH-mm-ss","picker-options":t.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.list.registerTime,callback:function(e){t.$set(t.list,"registerTime",e)},expression:"list.registerTime"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"按分组查看："}},[i("el-select",{attrs:{clearable:"",placeholder:"默认选择全部"},model:{value:t.list.groupId,callback:function(e){t.$set(t.list,"groupId",e)},expression:"list.groupId"}},t._l(t.groupList,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1)],1)]),t._v(" "),i("el-card",{staticStyle:{"margin-top":"10px"},attrs:{shadow:"never"}},[i("div",{staticClass:"flex-row-between"},[i("div",[i("i",{staticClass:"el-icon-tickets"}),t._v(" "),i("span",[t._v("数据列表")]),t._v(" "),i("span",{staticStyle:{"margin-left":"20px",color:"#f59a23","font-weight":"500","font-size":"20px"}},[t._v("分销员总数："+t._s(t.total))])]),t._v(" "),i("div",[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.exportExcel()}}},[t._v("\n          导出Excel\n        ")])],1)])]),t._v(" "),i("el-card",{staticStyle:{"margin-top":"10px"},attrs:{shadow:"never"}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableList,border:""},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),i("el-table-column",{attrs:{label:"分销员昵称",width:"140",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.channelUsernickName))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"分销员手机号",width:"120",prop:"channelUserPhone",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{label:"标识码",width:"160",prop:"inviteCode",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{label:"所属分组",width:"200",prop:"channelGroupName",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{label:"邀请方昵称",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(""==e.row.inviternickName?"--":e.row.inviternickName)+"\n        ")]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"邀请方手机号",width:"130",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(""==e.row.inviterPhone?"--":e.row.inviterPhone)+"\n        ")]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"130",prop:"orderTotal",align:"center"},scopedSlots:t._u([{key:"header",fn:function(e){return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"累计成交笔数是指该分销员转发成功下单和有绑定关系的客户成功下单；",placement:"top"}},[i("el-button",{staticStyle:{color:"#909399","font-weight":"600"},attrs:{type:"text"}},[t._v("累计成交笔数"),i("i",{staticClass:"el-icon-question"})])],1)]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"165",prop:"orderAmount",align:"center"},scopedSlots:t._u([{key:"header",fn:function(e){return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"累计分销商品交易额是指该分销员转发成功下单和邀请成功的客户关联的订单支付成功的分销商品交易额；",placement:"top"}},[i("el-button",{staticStyle:{color:"#909399","font-weight":"600"},attrs:{type:"text"}},[t._v("累计分销商品交易额"),i("i",{staticClass:"el-icon-question"})])],1)]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"累计分到佣金（不剔除退款）",width:"240",prop:"commissionAmount",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{label:"累计分到邀请奖励",width:"180",prop:"inviteAmount",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{label:"加入时间",width:"160",prop:"createTime",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{label:"状态",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.state?i("span",[t._v("正常")]):t._e(),t._v(" "),1===e.row.state?i("span",[t._v("锁定")]):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:"300",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.state?i("el-button",{staticClass:"button_mian",attrs:{type:"text"},on:{click:function(i){t.auditTrue(0,e.row)}}},[t._v("解冻")]):t._e(),t._v(" "),0===e.row.state?i("el-button",{staticClass:"button_mian",attrs:{type:"text"},on:{click:function(i){t.auditTrue(1,e.row)}}},[t._v("冻结")]):t._e(),t._v(" "),i("el-button",{staticClass:"button_mian",attrs:{type:"text"},on:{click:function(i){t.showDetails(e.row)}}},[t._v("查看绑定客户")])]}}])})],1),t._v(" "),i("div",{staticClass:"flex-row-between",staticStyle:{"padding-top":"20px"}},[i("div",[i("el-button",{attrs:{type:"primary"},on:{click:t.changeGroup}},[t._v("批量修改分组")])],1),t._v(" "),i("el-pagination",{staticStyle:{"margin-top":"10px","margin-left":"20px"},attrs:{background:"",layout:"total,sizes,prev,pager,next,jumper","page-size":t.page_size,"page-sizes":[10,30,50],"current-page":t.pageNum,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.pageChange}})],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"分销员解冻",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("span",{staticStyle:{"margin-left":"10%","font-weight":"600"}},[t._v("您确定要解冻该分销员？")]),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.audit(0)}}},[t._v("确 定")])],1)]),t._v(" "),i("el-dialog",{attrs:{title:"分销员冻结",visible:t.dialogFormVisibleOne},on:{"update:visible":function(e){t.dialogFormVisibleOne=e}}},[i("span",{staticStyle:{"margin-left":"10%","font-weight":"600"}},[t._v("冻结账号后分销员分享不再得钱，商城会做提示该分销员已冻结，但是可以能提现，冻结后分销员不再分佣。")]),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisibleOne=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.audit(1)}}},[t._v("确 定")])],1)]),t._v(" "),i("el-dialog",{attrs:{title:"设置分销员分组",visible:t.dialogFormVisibleGroup,width:"30%"},on:{"update:visible":function(e){t.dialogFormVisibleGroup=e}}},[i("el-form",{attrs:{size:"small","label-width":"140px"}},[i("el-form-item",{attrs:{label:"按分组查看："}},[i("el-select",{attrs:{placeholder:"默认分组"},model:{value:t.group.groupId,callback:function(e){t.$set(t.group,"groupId",e)},expression:"group.groupId"}},t._l(t.groupList,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisibleGroup=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.setDistriGroup}},[t._v("确 定")])],1)],1)],1)},[],!1,null,"6960415a",null);l.options.__file="distributorList.vue";e.default=l.exports},tbI0:function(t,e,i){},tgZa:function(t,e,i){i("nGDx"),t.exports=i("WEpk").Object.entries}}]);
//# sourceMappingURL=chunk-58ed.93ac9a41.js.map