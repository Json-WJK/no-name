(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7356"],{"2rhy":function(t,e,a){"use strict";a.d(e,"g",function(){return s}),a.d(e,"b",function(){return n}),a.d(e,"a",function(){return o}),a.d(e,"j",function(){return c}),a.d(e,"c",function(){return r}),a.d(e,"i",function(){return l}),a.d(e,"f",function(){return u}),a.d(e,"e",function(){return d}),a.d(e,"h",function(){return p}),a.d(e,"d",function(){return h});var i=a("t3Un");function s(t){return Object(i.a)({url:"/sys/business/shopActivity/getShopActivityList",method:"post",data:t})}function n(t){return Object(i.a)({url:"/sys/business/shopActivity/calculatedActivityDiscount",method:"post",data:t})}function o(t){return Object(i.a)({url:"/sys/business/shopActivity/addShopActivity",method:"post",data:t})}function c(t){return Object(i.a)({url:"/sys/business/shopActivity/updateShopActivity",method:"post",data:t})}function r(t){return Object(i.a)({url:"/sys/business/shopActivity/deleteShopActivity",method:"post",data:t})}function l(t){return Object(i.a)({url:"/sys/business/shopActivity/invalidShopActivity",method:"post",data:t})}function u(t){return Object(i.a)({url:"/sys/business/shopActivity/getShopActivityById",method:"post",data:t})}function d(t){return Object(i.a)({url:"/sys/business/shopActivity/getActivityProductListById",method:"post",data:t})}function p(t){return Object(i.a)({url:"/sys/business/shopActivity/getShopActivityListById",method:"post",data:t})}function h(t){return Object(i.a)({url:"/product/mall/active/findActiveAndProduct?activeId="+t.activeId+"&productIds="+t.ids,method:"get"})}},lFPW:function(t,e,a){"use strict";a.r(e);var i=a("QbLZ"),s=a.n(i),n=a("L2JU"),o=a("2rhy"),c={data:function(){return{searchList:{tabType:"-1",pageNum:1,pageSize:5},category:[],list:[],listTotal:0,applicationTime:"",pickerOptions:{shortcuts:[{text:"今天",onClick:function(t){t.$emit("pick",new Date)}},{text:"昨天",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",e)}},{text:"一周前",onClick:function(t){var e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",e)}}]},brandFold:!1}},created:function(){this.searchList.shopId=this.shop.shopId,this.searchList.activityType=1,this.getData()},methods:{getData:function(){var t=this;this.searchList.activityStatus="-1"==this.searchList.tabType?"":this.searchList.tabType,console.log("请求的数据",this.searchList),Object(o.g)(this.searchList).then(function(e){console.log("活动列表",e),200==e.code&&(t.list=e.data.list,t.listTotal=e.data.total)})},reset:function(){this.searchList.name="",this.searchList.beginTime="",this.searchList.endTime="",this.getData()},failItem:function(t){var e=this;this.$confirm("确定让这组限时折扣活动失效吗？失效后， 活动商品将提前结束活动，恢复至原价；买家之前已购买的限时折扣商品正常下单，待付款订单也可正常提交。","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={id:t.id,userId:e.user.userId,shopId:e.shop.shopId,name:t.name};Object(o.i)(a).then(function(t){console.log("失效操作",t),200==t.code?(e.$message({type:"success",message:t.message}),e.getData()):e.$message.error(t.message)})}).catch(function(){})},deleteItem:function(t){var e=this;this.$confirm("确定删除此限时折扣活动?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.c)({id:t,userId:e.user.userId}).then(function(t){console.log("删除操作",t),200==t.code?(e.$message({type:"success",message:t.message}),e.getData()):e.$message.error(t.message)})}).catch(function(){})},handleSizeChange:function(t){console.log("每页 "+t+" 条"),this.searchList.pageSize=t,this.getData()},handleCurrentChange:function(t){console.log("当前页: "+t),this.searchList.pageNum=t,this.getData()}},computed:s()({},Object(n.c)(["user","shop"]))},r=(a("xYgS"),a("KHd+")),l=Object(r.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pageContent"},[a("el-card",{staticClass:"filter-container",attrs:{shadow:"never"}},[a("el-tabs",{on:{"tab-click":t.getData},model:{value:t.searchList.tabType,callback:function(e){t.$set(t.searchList,"tabType",e)},expression:"searchList.tabType"}},[a("el-tab-pane",{attrs:{label:"所有活动",name:"-1"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"未开始",name:"0"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"进行中",name:"1"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"已结束",name:"2"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"已失效",name:"3"}})],1),t._v(" "),a("div",[a("i",{staticClass:"el-icon-search"}),t._v(" "),a("span",[t._v("筛选搜索")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:t.getData}},[t._v("查询")]),t._v(" "),a("el-button",{staticStyle:{float:"right","margin-right":"15px"},attrs:{size:"small"},on:{click:t.reset}},[t._v("重置")])],1),t._v(" "),a("div",{staticStyle:{"margin-top":"15px"}},[a("el-form",{attrs:{inline:!0,model:t.searchList,size:"small","label-width":"140px"}},[a("el-form-item",{attrs:{label:"活动名称："}},[a("el-input",{staticStyle:{width:"203px"},attrs:{clearable:"",placeholder:"活动名称"},model:{value:t.searchList.name,callback:function(e){t.$set(t.searchList,"name",e)},expression:"searchList.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"开始日期："}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择开始时间",align:"right","picker-options":t.pickerOptions},model:{value:t.searchList.beginTime,callback:function(e){t.$set(t.searchList,"beginTime",e)},expression:"searchList.beginTime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"结束日期："}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择结束时间",align:"right","picker-options":t.pickerOptions},model:{value:t.searchList.endTime,callback:function(e){t.$set(t.searchList,"endTime",e)},expression:"searchList.endTime"}})],1)],1)],1)],1),t._v(" "),a("el-card",{staticClass:"operate-container",staticStyle:{"margin-top":"10px"},attrs:{shadow:"never"}},[a("div",{staticClass:"flex-row-between",staticStyle:{width:"100%"}},[a("div",[a("i",{staticClass:"el-icon-tickets"}),t._v(" "),a("span",[t._v("数据列表")])]),t._v(" "),a("div",{staticStyle:{"padding-right":"20px"}},[a("el-button",{attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:function(e){t.$router.push({path:"/marketManage/discount/newDiscount"})}}},[t._v("新增限时折扣")])],1)])]),t._v(" "),a("div",[a("el-card",{staticClass:"filter-container",staticStyle:{"margin-top":"20px"},attrs:{shadow:"never"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"活动名称",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{label:"活动时间",width:"450"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.activityBeginTime+" 至 "+e.row.activityEndTime)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"活动状态",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.activityStatus?a("div",{staticStyle:{color:"#E6A23C"}},[t._v("未开始")]):t._e(),t._v(" "),1==e.row.activityStatus?a("div",{staticStyle:{color:"#409EFF"}},[t._v("进行中")]):t._e(),t._v(" "),2==e.row.activityStatus?a("div",{staticStyle:{color:"#F56C6C"}},[t._v("已结束")]):t._e(),t._v(" "),3==e.row.activityStatus?a("div",{staticStyle:{color:"#F56C6C"}},[t._v("已失效")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"140"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("span",{attrs:{"data-scope":e.row}},[t._v("订单总金额")]),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"活动订单总付款金额（包含退款）",placement:"top-start"}},[a("i",{staticClass:"el-icon-question"})])]}},{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.orderAmount)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"140"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("span",{attrs:{"data-scope":e.row}},[t._v("付款订单数")]),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"参与活动并付款的订单（包含退款订单）",placement:"top-start"}},[a("i",{staticClass:"el-icon-question"})])]}},{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.orderTotal)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"140"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("span",{attrs:{"data-scope":e.row}},[t._v("付款人数")]),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"参与活动并付款的人数（包含退款人数）",placement:"top-start"}},[a("i",{staticClass:"el-icon-question"})])]}},{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.userTotal)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"productTotal",label:"参与活动商品数",width:"140"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.$router.push({path:"/marketManage/discount/discountInfo",query:{id:e.row.id}})}}},[t._v("查看")]),t._v(" "),1==e.row.activityStatus||0==e.row.activityStatus?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.$router.push({path:"/marketManage/discount/editDiscount",query:{id:e.row.id}})}}},[t._v("修改")]):t._e(),t._v(" "),1==e.row.activityStatus?a("el-button",{staticStyle:{color:"#F56C6C"},attrs:{type:"text",size:"small"},on:{click:function(a){t.failItem(e.row)}}},[t._v("使失效")]):t._e(),t._v(" "),0==e.row.activityStatus?a("el-button",{staticStyle:{color:"#F56C6C"},attrs:{type:"text",size:"small"},on:{click:function(a){t.deleteItem(e.row.id)}}},[t._v("删除")]):t._e()]}}])})],1),t._v(" "),a("div",{staticClass:"flex-row-end",staticStyle:{"padding-top":"20px"}},[a("div",[a("el-pagination",{attrs:{"page-sizes":[5,10,15,20],"page-size":t.searchList.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.listTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])],1)],1)],1)},[],!1,null,"684b0beb",null);l.options.__file="discount.vue";e.default=l.exports},"loz+":function(t,e,a){},xYgS:function(t,e,a){"use strict";var i=a("loz+");a.n(i).a}}]);
//# sourceMappingURL=chunk-7356.8a64f30f.js.map