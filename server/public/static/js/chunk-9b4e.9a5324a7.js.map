{"version":3,"sources":["webpack:///./src/api/marketManage/coupon.js","webpack:///./src/views/shop/shopRenovation/components/popover/coupon.vue?b2f9","webpack:///./src/views/shop/shopRenovation/components/popover/coupon.vue?e09a","webpack:///src/views/shop/shopRenovation/components/popover/coupon.vue","webpack:///./src/views/shop/shopRenovation/components/popover/coupon.vue"],"names":["__webpack_require__","d","__webpack_exports__","getCouponInfoPage","getCouponProductPage","getCouponUserPage","addCouponInfo","editCouponInfo","couponData","findCouponInfo","deleteCouponInfo","userCouponProductPage","getCouponInfoSubGroupPage","getCouponInfoSubGroupInfo","getCouponCodeUrl","_utils_request__WEBPACK_IMPORTED_MODULE_0__","data","request","url","method","shopId","couponId","popover_couponvue_type_script_lang_js_","props","watch","couponShow","newvalue","oldValue","this","getData","fromLoading","searchList","pageNum","pageSize","category","list","listTotal","multipleSelection","created","shop","methods","sub","console","log","length","couponIds","$message","error","$emit","$refs","multipleTable","clearSelection","toggleSelection","rows","_this","forEach","row","toggleRowSelection","handleSelectionChange","val","handleSizeChange","handleCurrentChange","reset","productName","shopCategoryIdArr","_this2","Object","coupon","then","res","code","total","close","change","$forceUpdate","computed","extends_default","vuex_esm","component","componentNormalizer","_vm","_h","$createElement","_c","_self","attrs","append-to-body","title","visible","width","close-on-click-modal","close-on-press-escape","show-close","on","update:visible","$event","staticClass","shadow","_v","staticStyle","float","type","size","click","margin-right","margin-top","inline","model","label-width","label","clearable","placeholder","input","value","callback","$$v","$set","expression","ref","tooltip-effect","selection-change","prop","scopedSlots","_u","key","fn","scope","data-id","id","_s","limitNumber","padding","page-sizes","page-size","layout","size-change","current-change","slot","options","__file"],"mappings":"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","file":"static/js/chunk-9b4e.9a5324a7.js","sourcesContent":["import request from '@/utils/request'\r\n// 分页查询优惠券\r\nexport function getCouponInfoPage(data) {\r\n  return request({\r\n    url: `/sys/couponInfo/getCouponInfoPage`,\r\n    method: 'post',\r\n    data: data\r\n  })\r\n}\r\n// 分页查询可添加优惠券商品\r\nexport function getCouponProductPage(data) {\r\n  return request({\r\n    url: `/sys/couponProduct/getCouponProductPage`,\r\n    method: 'post',\r\n    data: data\r\n  })\r\n}\r\n// 分页查询优惠券可添加用户\r\nexport function getCouponUserPage(data) {\r\n  return request({\r\n    url: `/sys/couponProduct/getCouponUserPage`,\r\n    method: 'post',\r\n    data: data\r\n  })\r\n}\r\n// 添加优惠券\r\nexport function addCouponInfo(data) {\r\n  return request({\r\n    url: `/sys/couponInfo/addCouponInfo`,\r\n    method: 'post',\r\n    data: data\r\n  })\r\n}\r\n// 编辑优惠券\r\nexport function editCouponInfo(data) {\r\n  return request({\r\n    url: `/sys/couponInfo/editCouponInfo`,\r\n    method: 'post',\r\n    data: data\r\n  })\r\n}\r\n// 优惠券使用数据\r\nexport function couponData(data) {\r\n  return request({\r\n    url: `/sys/couponInfo/couponData?couponId=${data}`,\r\n    method: 'get',\r\n  })\r\n}\r\n// 查询优惠券详情\r\nexport function findCouponInfo(data) {\r\n  return request({\r\n    url: `/sys/couponInfo/findCouponInfo?couponId=${data}`,\r\n    method: 'get',\r\n  })\r\n}\r\n// 优惠券失效\r\nexport function deleteCouponInfo(data) {\r\n  return request({\r\n    url: `/sys/couponInfo/deleteCouponInfo?couponId=${data}`,\r\n    method: 'DELETE',\r\n  })\r\n}\r\n// 优惠券商品使用列表\r\nexport function userCouponProductPage(data) {\r\n  return request({\r\n    url: `/sys/couponProduct/userCouponProductPage`,\r\n    method: 'post',\r\n    data: data\r\n  })\r\n}\r\n// 组件 - 列表\r\nexport function getCouponInfoSubGroupPage(data) {\r\n  return request({\r\n    url: `/sys/couponInfo/getCouponInfoSubGroupPage`,\r\n    method: 'post',\r\n    data: data\r\n  })\r\n}\r\n// 组件 - 回显\r\nexport function getCouponInfoSubGroupInfo(data) {\r\n  return request({\r\n    url: `/sys/couponInfo/getCouponInfoSubGroupInfo?couponIdStr=${data}`,\r\n    method: 'get',\r\n  })\r\n}\r\n// 优惠券推广\r\nexport function getCouponCodeUrl(data) {\r\n  return request({\r\n    url: `/sys/couponInfo/getCouponCodeUrl?shopId=${data.shopId}&couponId=${data.couponId}`,\r\n    method: 'get',\r\n  })\r\n}\r\n// export function getCouponCodeUrl(data) {\r\n//   return request({\r\n//     url: `/sys/couponInfo/getCouponCodeUrl`,\r\n//     method: 'post',\r\n//     data: data\r\n//   })\r\n// }\r\n\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"append-to-body\":true,\"title\":\"新增商品列表\",\"visible\":_vm.couponShow,\"width\":\"70%\",\"close-on-click-modal\":false,\"close-on-press-escape\":false,\"show-close\":false},on:{\"update:visible\":function($event){_vm.couponShow=$event}}},[_c('el-card',{staticClass:\"filter-container\",attrs:{\"shadow\":\"never\"}},[_c('div',[_c('i',{staticClass:\"el-icon-search\"}),_vm._v(\" \"),_c('span',[_vm._v(\"筛选搜索\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"float\":\"right\"},attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.getData}},[_vm._v(\"查询\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"float\":\"right\",\"margin-right\":\"15px\"},attrs:{\"size\":\"small\"},on:{\"click\":_vm.reset}},[_vm._v(\"重置\")])],1),_vm._v(\" \"),_c('div',{staticStyle:{\"margin-top\":\"15px\"}},[_c('el-form',{attrs:{\"inline\":true,\"model\":_vm.searchList,\"size\":\"small\",\"label-width\":\"140px\"}},[_c('el-form-item',{attrs:{\"label\":\"优惠券名称：\"}},[_c('el-input',{staticStyle:{\"width\":\"203px\"},attrs:{\"clearable\":\"\",\"placeholder\":\"优惠券名称\"},on:{\"input\":function($event){_vm.change($event)}},model:{value:(_vm.searchList.couponName),callback:function ($$v) {_vm.$set(_vm.searchList, \"couponName\", $$v)},expression:\"searchList.couponName\"}})],1)],1)],1)]),_vm._v(\" \"),_c('el-card',{staticClass:\"filter-container\",staticStyle:{\"margin-top\":\"10px\"},attrs:{\"shadow\":\"never\"}},[_c('el-table',{ref:\"multipleTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.list,\"tooltip-effect\":\"dark\"},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"优惠券名称\",\"prop\":\"couponName\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"适用商品\",\"width\":\"240\",\"prop\":\"productTypeName\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"优惠内容\",\"width\":\"240\",\"prop\":\"couponContext\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"领取人限制\",\"width\":\"140\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{attrs:{\"data-id\":scope.row.id}},[_vm._v(\"全部用户\")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"限领次数\",\"width\":\"140\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(scope.row.limitNumber == 0 ? '不限制' : scope.row.limitNumber))]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"剩余库存\",\"prop\":\"havaNum\",\"width\":\"140\"}})],1),_vm._v(\" \"),_c('div',{staticStyle:{\"padding\":\"10px 0 20px 0\"}},[_c('el-pagination',{attrs:{\"page-sizes\":[5, 10, 15, 20],\"page-size\":_vm.searchList.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.listTotal},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.close}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.sub}},[_vm._v(\"确 定\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../node_modules/happypack/loader.js?id=js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./coupon.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/happypack/loader.js?id=js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./coupon.vue?vue&type=script&lang=js&\"","<template>\r\n  <el-dialog :append-to-body=\"true\" title=\"新增商品列表\" :visible.sync=\"couponShow\" width=\"70%\" :close-on-click-modal=\"false\" :close-on-press-escape=\"false\" :show-close=\"false\">\r\n    <!-- 筛选条件 -->\r\n    <el-card class=\"filter-container\" shadow=\"never\">\r\n      <div>\r\n        <i class=\"el-icon-search\"></i>\r\n        <span>筛选搜索</span>\r\n        <el-button style=\"float: right\" @click=\"getData\" type=\"primary\" size=\"small\">查询</el-button>\r\n        <el-button style=\"float: right;margin-right: 15px\" @click=\"reset\" size=\"small\">重置</el-button>\r\n      </div>\r\n      <div style=\"margin-top: 15px\">\r\n        <el-form :inline=\"true\" :model=\"searchList\" size=\"small\" label-width=\"140px\">\r\n          <el-form-item label=\"优惠券名称：\">\r\n            <el-input style=\"width: 203px\" v-model=\"searchList.couponName\" clearable placeholder=\"优惠券名称\" @input=\"change($event)\"></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n    </el-card>\r\n    <el-card class=\"filter-container\" shadow=\"never\" style=\"margin-top:10px;\">\r\n      <el-table\r\n        ref=\"multipleTable\"\r\n        :data=\"list\"\r\n        tooltip-effect=\"dark\"\r\n        style=\"width: 100%\"\r\n        @selection-change=\"handleSelectionChange\">\r\n        <el-table-column type=\"selection\" width=\"55\"></el-table-column>\r\n        <el-table-column label=\"优惠券名称\" prop=\"couponName\"></el-table-column>\r\n        <el-table-column label=\"适用商品\" width=\"240\" prop=\"productTypeName\"></el-table-column>\r\n        <el-table-column label=\"优惠内容\" width=\"240\" prop=\"couponContext\"></el-table-column>\r\n        <el-table-column label=\"领取人限制\" width=\"140\">\r\n          <template slot-scope=\"scope\">\r\n            <div :data-id=\"scope.row.id\">全部用户</div>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"限领次数\" width=\"140\">\r\n          <template slot-scope=\"scope\">{{ scope.row.limitNumber == 0 ? '不限制' : scope.row.limitNumber }}</template>\r\n        </el-table-column>\r\n        <el-table-column label=\"剩余库存\" prop=\"havaNum\" width=\"140\"></el-table-column>\r\n      </el-table>\r\n      <div style=\"padding:10px 0 20px 0;\">\r\n        <el-pagination\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n          :page-sizes=\"[5, 10, 15, 20]\"\r\n          :page-size=\"searchList.pageSize\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"listTotal\">\r\n        </el-pagination>\r\n      </div>\r\n    </el-card>\r\n    <span slot=\"footer\" class=\"dialog-footer\">\r\n      <el-button @click=\"close\">取 消</el-button>\r\n      <el-button type=\"primary\" @click=\"sub\">确 定</el-button>\r\n    </span>\r\n  </el-dialog>\r\n</template>\r\n<script>\r\nimport { mapState } from 'vuex'\r\nimport { getCouponInfoSubGroupPage } from '@/api/marketManage/coupon'\r\nexport default {\r\n  props: [\"couponIds\",\"couponShow\"],\r\n  watch:{\r\n    couponShow(newvalue,oldValue){\r\n      if(newvalue){\r\n        this.getData();\r\n      }\r\n    },\r\n  },\r\n  data(){\r\n    return{\r\n      fromLoading:false,\r\n      searchList:{\r\n        pageNum:1,\r\n        pageSize:5\r\n      },\r\n      category:[],\r\n      list:[],\r\n      listTotal:0,\r\n      multipleSelection:[],           // 勾选的数据\r\n    }\r\n  },\r\n  created(){\r\n    this.searchList.shopId = this.shop.shopId\r\n  },\r\n  methods:{\r\n    sub(){\r\n      console.log('multipleSelection',this.multipleSelection)\r\n      if(this.multipleSelection.length == 0){\r\n        this.$message.error('请选择优惠券后再试');\r\n        return;\r\n      }\r\n      if(this.couponIds.length + this.multipleSelection.length > 10){\r\n        this.$message.error('最多可选择10张优惠券');\r\n        return;\r\n      }\r\n      this.$emit('couponFun',this.multipleSelection)\r\n      this.$refs.multipleTable.clearSelection();\r\n    },\r\n    toggleSelection(rows) {\r\n      if (rows) {\r\n        rows.forEach(row => {\r\n          this.$refs.multipleTable.toggleRowSelection(row);\r\n        });\r\n      } else {\r\n        this.$refs.multipleTable.clearSelection();\r\n      }\r\n    },\r\n    handleSelectionChange(val) {\r\n      this.multipleSelection = val;\r\n    },\r\n    handleSizeChange(val) {\r\n      console.log(`每页 ${val} 条`);\r\n      this.searchList.pageSize = val;\r\n      this.getData()\r\n    },\r\n    handleCurrentChange(val) {\r\n      console.log(`当前页: ${val}`);\r\n      this.searchList.pageNum = val;\r\n      this.getData()\r\n    },\r\n    reset(){\r\n      this.searchList.productName = ''\r\n      this.searchList.shopCategoryIdArr = []\r\n      this.getData();\r\n    },\r\n    // 列表 - 获取数据\r\n    getData(){\r\n      this.fromLoading = true\r\n      this.searchList.couponIds = this.couponIds || []\r\n      console.log('请求的数据',this.searchList)\r\n      getCouponInfoSubGroupPage(this.searchList).then(res=>{\r\n        console.log('优惠券数据列表',res)\r\n        if(res.code == 200){\r\n          this.list = res.data.list\r\n          this.listTotal = res.data.total\r\n        }\r\n        this.fromLoading = false\r\n      })\r\n    },\r\n    close(){\r\n      this.$emit('couponClose',true)\r\n    },\r\n    change(){\r\n      this.$forceUpdate()\r\n    },\r\n  },\r\n  computed: {\r\n    ...mapState([\r\n      'user',\r\n      'shop'\r\n    ])\r\n  },\r\n}\r\n</script>","import { render, staticRenderFns } from \"./coupon.vue?vue&type=template&id=4d734682&\"\nimport script from \"./coupon.vue?vue&type=script&lang=js&\"\nexport * from \"./coupon.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"coupon.vue\"\nexport default component.exports"],"sourceRoot":""}