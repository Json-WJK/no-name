(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2067","chunk-01b7","chunk-39b6"],{"4VFJ":function(t,e,i){},"56kf":function(t,e,i){"use strict";var s=i("p0xt");i.n(s).a},GPys:function(t,e,i){"use strict";var s=i("JdBN");i.n(s).a},JLSN:function(t,e,i){"use strict";i.d(e,"b",function(){return o}),i.d(e,"d",function(){return a}),i.d(e,"a",function(){return n}),i.d(e,"c",function(){return l});var s=i("t3Un");function o(t){return Object(s.a)({url:"/sys/business/shopInfo/getShopConfigInfo?shopId="+t.shopId,method:"get",data:t})}function a(t){return Object(s.a)({url:"/sys/business/shopInfo/updateShopConfigInfo",method:"post",data:t})}function n(t){return Object(s.a)({url:"/sys/business/channelCommission/getCommissionProductList",method:"post",data:t})}function l(t){return Object(s.a)({url:"/sys/business/channelCommission/insertChannelProductConfig",method:"post",data:t})}},JdBN:function(t,e,i){},PRgn:function(t,e,i){"use strict";i.d(e,"b",function(){return o}),i.d(e,"e",function(){return a}),i.d(e,"a",function(){return n}),i.d(e,"f",function(){return l}),i.d(e,"h",function(){return r}),i.d(e,"g",function(){return c}),i.d(e,"d",function(){return u}),i.d(e,"c",function(){return d});var s=i("t3Un");function o(t){return Object(s.a)({url:"/product/business/productCategoryShop/getProductCategoryInfoList",method:"post",data:t})}function a(t){return Object(s.a)({url:"/product/business/productCategoryShop/insertProductCategoryShop",method:"post",data:t})}function n(t){return Object(s.a)({url:"/product/business/productCategoryShop/deleteProductCategoryShop",method:"post",data:t})}function l(t){return Object(s.a)({url:"/product/business/productCategoryShop/isCategoryNameExist?name="+t.name+"&level="+t.level+"&shopId="+t.shopId+"&parentId="+t.parentId,method:"get"})}function r(t){return Object(s.a)({url:"/product/business/productCategoryShop/updateProductCategoryShopOrderNo",method:"post",data:t})}function c(t){return Object(s.a)({url:"/product/business/productCategoryShop/updateProductCategoryShop",method:"post",data:t})}function u(t){return Object(s.a)({url:"/product/business/productCategoryShop/getProductCategoryShopAllList?shopId="+t,method:"get"})}function d(t){return Object(s.a)({url:"/product/business/productCategoryShop/getProductCategoryInfoPageList",method:"post",data:t})}},"V+nd":function(t,e,i){"use strict";i.r(e);i("L2JU");var s=i("PRgn"),o=i("JLSN"),a={props:["status","user","shop"],data:function(){return{category:[],list:{name:"",productCode:"",skuCode:"",shopCategoryIdArr:[],isJoin:"",salesStatus:""},direction:"",tableList:[],loading:!1,multipleSelection:[],searchSkuIdList:[],dialogFormVisible:!1,form:{isJoin:"",radio:"0"},commissionRate:"",inviteRate:"",productIds:[],isRetailstoreList:[{label:"全部",value:""},{label:"参与推广",value:0},{label:"不参与推广",value:1}],salesStatusList:[{label:"全部",value:""},{label:"出售中",value:0},{label:"下架",value:1},{label:"待出售",value:2},{label:"回收站",value:3}],pageNum:1,page_size:10,total:0}},created:function(){this.searchList(),this.shopId=this.shop.shopId,this.getCategory()},mounted:function(){},methods:{getCategory:function(){var t=this;Object(s.d)(this.shop.shopId).then(function(e){console.log("获取店铺分类",e),t.category=e.data})},searchList:function(){var t=this;this.loading=!0,Object(o.a)({shopId:this.shop.shopId,pageNum:this.pageNum,pageSize:this.page_size,name:this.list.name,productCode:this.list.productCode,isJoin:this.list.isJoin,salesStatus:this.list.salesStatus,shopCategoryPid:this.list.shopCategoryIdArr[0]||"",shopCategoryId:this.list.shopCategoryIdArr[1]||""}).then(function(e){t.loading=!1,t.tableList=e.data.list,t.total=e.data.total})},setCommission:function(t){if(this.productIds=[],t)this.productIds.push(t.productId);else{if(null==this.multipleSelection||this.multipleSelection.length<1)return void this.$message({message:"请选择要操作的商品",type:"warning",duration:1e3});this.productIds=this.multipleSelection.map(function(t){return t.productId})}this.dialogFormVisible=!0,this.form.radio="0",this.form.isRetailstore="",this.getCommission()},getCommission:function(){var t=this;Object(o.b)({shopId:this.shop.shopId}).then(function(e){console.log(e,"佣金默认比例"),200==e.code?(t.commissionRate=e.data.commissionRate,t.inviteRate=e.data.inviteRate):t.$notify.error({title:"失败",message:"佣金默认比例获取失败"})})},setProductRateSave:function(){var t=this;if(""!==this.form.isJoin)if("0"!==this.form.isJoin||""!==this.form.radio)if(""!==this.commissionRate&&void 0!=this.commissionRate)if(""!==this.inviteRate&&void 0!=this.inviteRate){"1"===this.form.isJoin&&Object(o.c)({shopId:this.shop.shopId,productIds:this.productIds.toString(),isJoin:this.form.isJoin}).then(function(e){200==e.code?(t.searchList(),t.$notify({title:"成功",message:"商品设置分销佣金成功",type:"success"})):t.$notify.error({title:"失败",message:e.message}),t.dialogFormVisible=!1});var e=Number(this.commissionRate)+Number(this.inviteRate);"0"===this.form.isJoin&&e>100?this.$notify.error({title:"失败",message:"佣金比例与邀请奖励比例之和不能大于100%"}):"0"===this.form.isJoin&&Object(o.c)({shopId:this.shop.shopId,productIds:this.productIds.toString(),isDefault:this.form.radio,isJoin:this.form.isJoin,commissionRate:this.commissionRate,inviteRate:this.inviteRate}).then(function(e){200==e.code?(t.searchList(),t.$notify({title:"成功",message:"商品设置分销佣金成功",type:"success"})):t.$notify.error({title:"失败",message:e.message}),t.dialogFormVisible=!1})}else this.$notify.error({title:"失败",message:"请输入邀请奖励佣金比例"});else this.$notify.error({title:"失败",message:"请输入佣金比例"});else this.$notify.error({title:"失败",message:"请选择佣金设置"});else this.$notify.error({title:"失败",message:"请选择是否参与推广"})},reset:function(){this.list={name:"",productCode:"",skuCode:"",shopCategoryIdArr:[],isJoin:"",salesStatus:""},this.page_size=10,this.pageNum=1,this.searchList()},handleSizeChange:function(t){this.page_size=t,this.searchList()},pageChange:function(t){this.pageNum=t,this.searchList()},handleSelectionChange:function(t){this.multipleSelection=t}},computed:{startTime:function(){return this.status}},watch:{startTime:function(t,e){return this.searchList(),t}}},n=(i("GPys"),i("KHd+")),l=Object(n.a)(a,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",[i("el-alert",{attrs:{title:"温馨提示：可同时设置店铺和单商品佣金比例，单商品的佣金比例优先级高于店铺佣金比例；系统根据你设置的佣金比例，自动与分销员进行结算。",type:"warning",closable:!1}})],1),t._v(" "),i("el-card",{staticClass:"filter-container",attrs:{shadow:"never"}},[i("div",[i("i",{staticClass:"el-icon-search"}),t._v(" "),i("span",[t._v("筛选搜索")]),t._v(" "),i("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:t.searchList}},[t._v("\n        查询\n      ")]),t._v(" "),i("el-button",{staticStyle:{float:"right","margin-right":"15px"},attrs:{size:"small"},on:{click:t.reset}},[t._v("\n        重置\n      ")])],1),t._v(" "),i("div",{staticStyle:{"margin-top":"15px"}},[i("el-form",{attrs:{inline:!0,model:t.list,size:"small","label-width":"140px"}},[i("el-form-item",{attrs:{label:"商品名称："}},[i("el-input",{attrs:{clearable:"",placeholder:"商品名称"},model:{value:t.list.name,callback:function(e){t.$set(t.list,"name",e)},expression:"list.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"商品编码："}},[i("el-input",{attrs:{clearable:"",placeholder:"商品编码"},model:{value:t.list.productCode,callback:function(e){t.$set(t.list,"productCode",e)},expression:"list.productCode"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"规格编码："}},[i("el-input",{attrs:{clearable:"",placeholder:"规格编码"},model:{value:t.list.skuCode,callback:function(e){t.$set(t.list,"skuCode",e)},expression:"list.skuCode"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"是否参与推广："}},[i("el-select",{model:{value:t.list.isJoin,callback:function(e){t.$set(t.list,"isJoin",e)},expression:"list.isJoin"}},t._l(t.isRetailstoreList,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"上下架状态："}},[i("el-select",{model:{value:t.list.salesStatus,callback:function(e){t.$set(t.list,"salesStatus",e)},expression:"list.salesStatus"}},t._l(t.salesStatusList,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"商品分类："}},[i("el-cascader",{attrs:{options:t.category,props:{checkStrictly:!0},clearable:""},model:{value:t.list.shopCategoryIdArr,callback:function(e){t.$set(t.list,"shopCategoryIdArr",e)},expression:"list.shopCategoryIdArr"}})],1)],1)],1)]),t._v(" "),i("el-card",{staticClass:"operate-container",attrs:{shadow:"never"}},[i("i",{staticClass:"el-icon-tickets"}),t._v(" "),i("span",[t._v("数据列表")])]),t._v(" "),i("el-card",{staticClass:"operate-container",attrs:{shadow:"never"}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableList,border:""},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),i("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),i("el-table-column",{attrs:{label:"商品名称","min-width":"140","show-overflow-tooltip":"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.name))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"商品主图",width:"140",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.imageUrl}})]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"上下架状态",width:"100",prop:"salesStatusName",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{label:"分类",width:"120",prop:"productCategoryShopName",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{label:"商品编码",width:"110",prop:"productCode",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{label:"销售价",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          ￥"+t._s(e.row.maxPrice)+"\n        ")]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"佣金比例",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.isJoin?i("span",[t._v(t._s(e.row.commissionRate)+"%")]):t._e(),t._v(" "),1==e.row.isJoin?i("span",[t._v("--")]):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"邀请奖励佣金比例",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.isJoin?i("span",[t._v(t._s(e.row.inviteRate)+"%")]):t._e(),t._v(" "),1==e.row.isJoin?i("span",[t._v("--")]):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"库存",width:"110",prop:"sumStock",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{label:"总销量",width:"120",prop:"salesCount",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{label:"是否参与推广",width:"130",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.isJoin?i("span",[t._v("参与")]):t._e(),t._v(" "),1==e.row.isJoin?i("span",[t._v("不参与")]):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{staticClass:"button_mian",attrs:{type:"text"},on:{click:function(i){t.setCommission(e.row)}}},[t._v("设置推广佣金")])]}}])})],1),t._v(" "),i("div",{staticClass:"flex-row-between",staticStyle:{"margin-top":"10px"}},[i("el-button",{staticClass:"btn-add",attrs:{type:"primary",size:"mini"},on:{click:function(e){t.setCommission()}}},[t._v("\n        批量设置推广佣金\n      ")]),t._v(" "),i("el-pagination",{staticStyle:{"margin-top":"10px","margin-left":"20px"},attrs:{background:"",layout:"total,sizes,prev,pager,next,jumper","page-size":t.page_size,"page-sizes":[10,30,50],"current-page":t.pageNum,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.pageChange}})],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"商品佣金设置",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"form",attrs:{model:t.form,"label-width":"140px"}},[i("el-form-item",{attrs:{label:"是否参与推广"}},[i("el-radio",{attrs:{label:"0"},model:{value:t.form.isJoin,callback:function(e){t.$set(t.form,"isJoin",e)},expression:"form.isJoin"}},[t._v("参与")]),t._v(" "),i("el-radio",{attrs:{label:"1"},model:{value:t.form.isJoin,callback:function(e){t.$set(t.form,"isJoin",e)},expression:"form.isJoin"}},[t._v("不参与")])],1),t._v(" "),"0"===t.form.isJoin?i("el-form-item",{attrs:{label:"佣金设置"}},[i("el-radio",{attrs:{label:"0"},on:{change:t.getCommission},model:{value:t.form.radio,callback:function(e){t.$set(t.form,"radio",e)},expression:"form.radio"}},[t._v("按默认比例设置")]),t._v(" "),i("el-radio",{attrs:{label:"1"},model:{value:t.form.radio,callback:function(e){t.$set(t.form,"radio",e)},expression:"form.radio"}},[t._v("自定义")])],1):t._e(),t._v(" "),"0"===t.form.isJoin?i("el-form-item",{attrs:{label:"佣金比例"}},[i("el-input-number",{staticStyle:{width:"80px"},attrs:{min:.01,max:99,precision:2,controls:!1,disabled:1!=t.form.radio,size:"mini"},model:{value:t.commissionRate,callback:function(e){t.commissionRate=e},expression:"commissionRate"}}),t._v("%\n        "),i("span",{staticClass:"item-contain-red"},[t._v("\n          输入范围最小为0.01，可保留2位小数\n        ")])],1):t._e(),t._v(" "),"0"===t.form.isJoin?i("el-form-item",{attrs:{label:"邀请奖励佣金比例"}},[i("el-input-number",{staticStyle:{width:"80px"},attrs:{min:.01,max:99,precision:2,disabled:1!=t.form.radio,controls:!1,size:"mini"},model:{value:t.inviteRate,callback:function(e){t.inviteRate=e},expression:"inviteRate"}}),t._v("%\n        "),i("span",{staticClass:"item-contain-red"},[t._v("\n          输入范围最小为0.01，可保留2位小数\n        ")])],1):t._e()],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.setProductRateSave}},[t._v("确 定")])],1)],1)],1)},[],!1,null,"09314695",null);l.options.__file="commissionProduct.vue";e.default=l.exports},lkqq:function(t,e,i){"use strict";i.r(e);var s=i("JLSN"),o={props:["status","shop","user"],data:function(){return{commissionRate:void 0,inviteRate:void 0}},created:function(){this.getRule()},mounted:function(){},methods:{getRule:function(){var t=this;Object(s.b)({shopId:this.shop.shopId}).then(function(e){200==e.code&&(t.commissionRate=e.data.commissionRate,t.inviteRate=e.data.inviteRate)})},saveRule:function(){var t=this;void 0!=this.commissionRate&&""!==this.commissionRate?void 0!=this.inviteRate&&""!==this.inviteRate?Number(this.inviteRate)+Number(this.commissionRate)>100?this.$notify.error({title:"错误",message:"佣金比例与邀请奖励比例之和不能大于100%"}):Object(s.d)({shopId:this.shop.shopId,commissionRate:this.commissionRate,inviteRate:this.inviteRate}).then(function(e){200==e.code?(t.$notify({title:"成功",message:"默认佣金设置成功",type:"success"}),t.getRule()):t.$notify.error({title:"失败",message:e.message})}):this.$notify.error({title:"错误",message:"请输入邀请奖励佣金比例"}):this.$notify.error({title:"错误",message:"请输入佣金比例"})}},computed:{startTime:function(){return this.status}}},a=(i("56kf"),i("KHd+")),n=Object(a.a)(o,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-card",{attrs:{shadow:"never"}},[s("h3",[t._v("分销员默认佣金设置\n        "),s("span",{staticClass:"item-contain-red"},[t._v("\n          佣金比例与邀请奖励比例之和不能大于100%，可保留两位小数\n        ")])]),t._v(" "),s("el-form",{staticStyle:{width:"50%",display:"inline-block"},attrs:{"label-width":"130px"}},[s("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"佣金比例"}},[s("el-input-number",{staticStyle:{width:"80px"},attrs:{min:.01,max:99,precision:2,controls:!1,size:"mini"},model:{value:t.commissionRate,callback:function(e){t.commissionRate=e},expression:"commissionRate"}}),t._v("%\n        "),s("span",{staticClass:"item-contain-red"},[t._v("\n          输入范围最小为0.01，可保留2位小数\n        ")])],1),t._v(" "),s("el-form-item",{attrs:{label:"邀请奖励佣金比例"}},[s("el-input-number",{staticStyle:{width:"80px"},attrs:{min:.01,max:99,precision:2,controls:!1,size:"mini"},model:{value:t.inviteRate,callback:function(e){t.inviteRate=e},expression:"inviteRate"}}),t._v("%\n        "),s("span",{staticClass:"item-contain-red"},[t._v("\n          输入范围最小为0.01，可保留2位小数\n        ")])],1),t._v(" "),s("div",{staticStyle:{"margin-top":"40px"}},[s("el-button",{attrs:{type:"primary"},on:{click:t.saveRule}},[t._v("保存")]),t._v(" "),s("el-button",{on:{click:t.getRule}},[t._v("取消")])],1)],1),t._v(" "),s("div",{staticClass:"pic"},[s("img",{attrs:{src:i("t23l"),alt:""}})])],1),t._v(" "),s("el-alert",{attrs:{title:"商品佣金比例：分销员推广商品后获得的商品佣金=商品佣金比例*商品实付金额（扣除物流、余额、积分等）；",type:"warning",closable:!1}}),t._v(" "),s("el-alert",{attrs:{title:"邀请奖励比例：下级分销员推广后，上级分销员获得邀请奖励=邀请奖励比例*商品实付金额（扣除运费、余额、积分等）；",type:"warning",closable:!1}}),t._v(" "),s("el-alert",{attrs:{title:"举例：B是A发展的分销员，B成功推广商品后，B可获得商品佣金，A可获得邀请奖励；",type:"warning",closable:!1}})],1)},[],!1,null,"4c5c337c",null);n.options.__file="commissionSet.vue";e.default=n.exports},p0xt:function(t,e,i){},t23l:function(t,e,i){t.exports=i.p+"static/img/commission.8a1b4a1.png"},wBL2:function(t,e,i){"use strict";var s=i("4VFJ");i.n(s).a},"zG/n":function(t,e,i){"use strict";i.r(e);var s=i("QbLZ"),o=i.n(s),a=i("L2JU"),n=i("lkqq"),l=i("V+nd"),r={data:function(){return{activeName:"first"}},methods:{handleClick:function(t,e){console.log(t,e)}},components:{CommissionSet:n.default,CommissionProduct:l.default},computed:o()({},Object(a.c)(["user","shop"]))},c=(i("wBL2"),i("KHd+")),u=Object(c.a)(r,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"分销员佣金设置",name:"first"}},[i("commission-set",{attrs:{status:t.activeName,user:t.user,shop:t.shop}})],1),t._v(" "),i("el-tab-pane",{attrs:{label:"按商品设置佣金",name:"second"}},[i("commission-product",{attrs:{status:t.activeName,user:t.user,shop:t.shop}})],1)],1)],1)},[],!1,null,"4c8fe1e4",null);u.options.__file="index.vue";e.default=u.exports}}]);
//# sourceMappingURL=chunk-2067.732072d3.js.map