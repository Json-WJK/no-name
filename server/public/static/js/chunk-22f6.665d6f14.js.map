{"version":3,"sources":["webpack:///./src/views/distributionManagement/distributeSet/index.vue?c931","webpack:///src/views/distributionManagement/distributeSet/index.vue","webpack:///./src/views/distributionManagement/distributeSet/index.vue?f0e6","webpack:///./src/api/distributionManagement/distributeSet.js","webpack:///./src/views/distributionManagement/distributeSet/index.vue","webpack:///./src/views/distributionManagement/distributeSet/index.vue?4678"],"names":["distributionManagement_distributeSetvue_type_script_lang_js_","data","auditSet","productSet","settleSet","settleDay","undefined","created","this","getRule","mounted","methods","_this","request","url","method","findChannelConfigInfoByShopId","shopId","shop","then","res","console","log","code","channelUserConfig","state","channelProductConfig","channelCalculateConfig","value","$notify","error","title","message","saveRule","_this2","editChannelConfig","configList","configType","type","computed","extends_default","Object","vuex_esm","component","componentNormalizer","_vm","_h","$createElement","_c","_self","staticClass","attrs","shadow","_v","staticStyle","margin-left","color","margin-top","label-width","label","model","callback","$$v","expression","width","disabled","controls","size","closable","on","click","options","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_11_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_11_2_node_modules_sass_loader_lib_loader_js_ref_11_3_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_11664704_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","n"],"mappings":"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","file":"static/js/chunk-22f6.665d6f14.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container\"},[_c('el-card',{attrs:{\"shadow\":\"never\"}},[_c('h3',[_vm._v(\"分销设置\"),_c('span',{staticStyle:{\"margin-left\":\"20px\",\"color\":\"#67C23A\"}},[_vm._v(\"温馨提示：请先完成该设置后，再进行分销商品和佣金的设置\")])])]),_vm._v(\" \"),_c('el-card',{staticClass:\"operate-container\",staticStyle:{\"margin-top\":\"20px\"},attrs:{\"shadow\":\"never\"}},[_c('el-form',{attrs:{\"label-width\":\"50px\"}},[_c('h3',[_vm._v(\"分销员审核设置\")]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"\"}},[_c('el-radio-group',{staticStyle:{\"margin-top\":\"20px\"},model:{value:(_vm.auditSet),callback:function ($$v) {_vm.auditSet=$$v},expression:\"auditSet\"}},[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"分销员申请后自动通过\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":2}},[_vm._v(\"分销员申请后需要系统审核\")])],1)],1),_vm._v(\" \"),_c('h3',[_vm._v(\"分销员商品设置\")]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"\"}},[_c('el-radio-group',{staticStyle:{\"margin-top\":\"20px\"},model:{value:(_vm.productSet),callback:function ($$v) {_vm.productSet=$$v},expression:\"productSet\"}},[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"创建商品后默认不参与推广\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":2}},[_vm._v(\"创建商品后默认参与推广\")])],1)],1),_vm._v(\" \"),_c('h3',[_vm._v(\"分销结算设置\")]),_vm._v(\" \"),_c('el-form-item',{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"label\":\"\"}},[_c('el-radio',{attrs:{\"label\":1},model:{value:(_vm.settleSet),callback:function ($$v) {_vm.settleSet=$$v},expression:\"settleSet\"}},[_vm._v(\"交易完成后\\n          \"),_c('el-input-number',{staticStyle:{\"width\":\"50px\"},attrs:{\"disabled\":_vm.settleSet == 2,\"controls\":false,\"size\":\"mini\"},model:{value:(_vm.settleDay),callback:function ($$v) {_vm.settleDay=$$v},expression:\"settleDay\"}}),_vm._v(\"天结算，最多30天\\n        \")],1),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":2},model:{value:(_vm.settleSet),callback:function ($$v) {_vm.settleSet=$$v},expression:\"settleSet\"}},[_vm._v(\"买家无法申请售后时结算(如果超过订单配置设置的无法申请售后时间，申请售后按钮变灰)\")])],1),_vm._v(\" \"),_c('el-alert',{attrs:{\"title\":\"风险提示：选择交易完成后，可能会造成较多佣金亏损；未结算时生成的退款会自动扣除；\",\"type\":\"warning\",\"closable\":false}}),_vm._v(\" \"),_c('el-alert',{attrs:{\"title\":\"结算后发生退款，继续产生负账单，与后面产生的正向账单一起结算抵扣；\",\"type\":\"warning\",\"closable\":false}}),_vm._v(\" \"),_c('div',{staticStyle:{\"margin-top\":\"40px\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveRule}},[_vm._v(\"保存\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Description: 分销设置\r\n * @Author: your name\r\n * @LastEditors: Please set LastEditors\r\n -->\r\n<template>\r\n  <div class=\"app-container\">\r\n    <el-card shadow=\"never\">\r\n      <h3>分销设置<span style=\"margin-left:20px;color:#67C23A\">温馨提示：请先完成该设置后，再进行分销商品和佣金的设置</span></h3>\r\n    </el-card>\r\n    <!-- 筛选条件 -->\r\n    <el-card class=\"operate-container\"\r\n             style=\"margin-top:20px\"\r\n             shadow=\"never\">\r\n      <el-form label-width=\"50px\">\r\n        <h3>分销员审核设置</h3>\r\n        <el-form-item label=\"\">\r\n          <el-radio-group v-model=\"auditSet\"\r\n                          style=\"margin-top:20px\">\r\n            <el-radio :label=\"1\">分销员申请后自动通过</el-radio>\r\n            <el-radio :label=\"2\">分销员申请后需要系统审核</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <h3>分销员商品设置</h3>\r\n        <el-form-item label=\"\">\r\n          <el-radio-group v-model=\"productSet\"\r\n                          style=\"margin-top:20px\">\r\n            <el-radio :label=\"1\">创建商品后默认不参与推广</el-radio>\r\n            <el-radio :label=\"2\">创建商品后默认参与推广</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <h3>分销结算设置</h3>\r\n        <el-form-item label=\"\"\r\n                      style=\"margin-top:20px\">\r\n          <el-radio v-model=\"settleSet\"\r\n                    :label=\"1\">交易完成后\r\n            <el-input-number v-model=\"settleDay\"\r\n                             :disabled=\"settleSet == 2\"\r\n                             :controls=\"false\"\r\n                             style=\"width:50px\"\r\n                             size=\"mini\"></el-input-number>天结算，最多30天\r\n          </el-radio>\r\n          <el-radio v-model=\"settleSet\"\r\n                    :label=\"2\">买家无法申请售后时结算(如果超过订单配置设置的无法申请售后时间，申请售后按钮变灰)</el-radio>\r\n        </el-form-item>\r\n\r\n        <el-alert title=\"风险提示：选择交易完成后，可能会造成较多佣金亏损；未结算时生成的退款会自动扣除；\"\r\n                  type=\"warning\"\r\n                  :closable=\"false\"></el-alert>\r\n        <el-alert title=\"结算后发生退款，继续产生负账单，与后面产生的正向账单一起结算抵扣；\"\r\n                  type=\"warning\"\r\n                  :closable=\"false\"></el-alert>\r\n\r\n        <div style=\"margin-top:40px\">\r\n          <el-button type=\"primary\"\r\n                     @click=\"saveRule\">保存</el-button>\r\n        </div>\r\n\r\n      </el-form>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mapState } from 'vuex'\r\nimport {\r\n  findChannelConfigInfoByShopId,\r\n  editChannelConfig\r\n} from '@/api/distributionManagement/distributeSet'\r\nexport default {\r\n  data() {\r\n    return {\r\n      auditSet: '',\r\n      productSet: '',\r\n      settleSet: '',\r\n      settleDay: undefined,\r\n    }\r\n  },\r\n  created() {\r\n    this.getRule()\r\n  },\r\n  mounted() {\r\n\r\n  },\r\n  methods: {\r\n    getRule() {\r\n      findChannelConfigInfoByShopId({\r\n        shopId: this.shop.shopId\r\n      }).then(res => {\r\n        console.log(res)\r\n        if (res.code == 200) {\r\n          this.auditSet = res.data.channelUserConfig.state\r\n          this.productSet = res.data.channelProductConfig.state\r\n          this.settleSet = res.data.channelCalculateConfig.state\r\n          if (res.data.channelCalculateConfig.state == 1) {\r\n            this.settleDay = res.data.channelCalculateConfig.value\r\n          }\r\n        } else {\r\n          this.$notify.error({\r\n            title: '失败',\r\n            message: res.message\r\n          })\r\n        }\r\n      })\r\n    },\r\n    saveRule() {\r\n      if (this.auditSet === '') {\r\n        this.$notify.error({\r\n          title: '错误',\r\n          message: '请选择分销员审核设置'\r\n        });\r\n        return\r\n      }\r\n      if (this.productSet === '') {\r\n        this.$notify.error({\r\n          title: '错误',\r\n          message: '请选择分销员商品设置'\r\n        });\r\n        return\r\n      }\r\n      if (this.settleSet === '') {\r\n        this.$notify.error({\r\n          title: '错误',\r\n          message: '请选择分销结算设置'\r\n        });\r\n        return\r\n      }\r\n      if (this.settleSet == 1 && this.settleDay == undefined || this.settleDay == '') {\r\n        this.$notify.error({\r\n          title: '错误',\r\n          message: '请填写交易完成天数'\r\n        });\r\n        return\r\n      }\r\n      let data = {\r\n        shopId: this.shop.shopId,\r\n        configList: [\r\n          {\r\n            \"configType\": 1,//1：分销员审核设置\r\n            \"state\": this.auditSet,//1：分销员申请后自动通过 ;2：分销员申请后需商家审核\r\n          }, {\r\n            \"configType\": 2,//2：分销商品设置\r\n            \"state\": this.productSet,//1：创建商品后默认不参与推广;2：创建商品后默认参与推广\r\n          }, {\r\n            \"configType\": 3,//3：分销结算设置\r\n            \"state\": this.settleSet,// 1：交易完成后{value}天结算\\r\\n    2：买家无法申请售后时结算'\r\n            \"value\": this.settleDay,//交易完成后{value}天结算\r\n          }]\r\n      }\r\n      editChannelConfig(data).then(res => {\r\n        if (res.code == 200) {\r\n          this.$notify({\r\n            title: '成功',\r\n            message: '设置保存成功',\r\n            type: 'success'\r\n          });\r\n          this.getRule()\r\n        } else {\r\n          this.$notify.error({\r\n            title: '失败',\r\n            message: res.message\r\n          });\r\n        }\r\n      })\r\n    },\r\n  },\r\n  computed: {\r\n    ...mapState([\r\n      'user',\r\n      'shop'\r\n    ])\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.app-container {\r\n  padding: 40px;\r\n  .item-contain-red {\r\n    color: red;\r\n    margin-left: 30px;\r\n  }\r\n  .pic {\r\n    display: inline-block;\r\n    width: 350px;\r\n    img {\r\n      width: 350px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/happypack/loader.js?id=js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/happypack/loader.js?id=js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","/*\r\n * @Description: 分销设置接口\r\n * @Author: your name\r\n * @Date: 2019-11-26 \r\n * @LastEditors: Please set LastEditors\r\n */\r\nimport request from '@/utils/request'\r\n\r\n\r\n//查询分销设置\r\nexport function findChannelConfigInfoByShopId(data) {\r\n  return request({\r\n    url: '/sys/business/shopChannel/findChannelConfigInfoByShopId',\r\n    method: 'post',\r\n    data: data\r\n  })\r\n}\r\n\r\n\r\n//编辑分销设置\r\nexport function editChannelConfig(data) {\r\n  return request({\r\n    url: '/sys/business/shopChannel/editChannelConfig',\r\n    method: 'post',\r\n    data: data\r\n  })\r\n}","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=11664704&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=11664704&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"11664704\",\n  null\n  \n)\n\ncomponent.options.__file = \"index.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js??ref--11-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--11-2!../../../../node_modules/sass-loader/lib/loader.js??ref--11-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=11664704&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js??ref--11-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--11-2!../../../../node_modules/sass-loader/lib/loader.js??ref--11-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=11664704&lang=scss&scoped=true&\""],"sourceRoot":""}