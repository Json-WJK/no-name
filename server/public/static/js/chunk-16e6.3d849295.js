(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-16e6"],{"2rhy":function(t,e,a){"use strict";a.d(e,"g",function(){return s}),a.d(e,"b",function(){return n}),a.d(e,"a",function(){return o}),a.d(e,"j",function(){return r}),a.d(e,"c",function(){return c}),a.d(e,"i",function(){return l}),a.d(e,"f",function(){return u}),a.d(e,"e",function(){return d}),a.d(e,"h",function(){return p}),a.d(e,"d",function(){return h});var i=a("t3Un");function s(t){return Object(i.a)({url:"/sys/business/shopActivity/getShopActivityList",method:"post",data:t})}function n(t){return Object(i.a)({url:"/sys/business/shopActivity/calculatedActivityDiscount",method:"post",data:t})}function o(t){return Object(i.a)({url:"/sys/business/shopActivity/addShopActivity",method:"post",data:t})}function r(t){return Object(i.a)({url:"/sys/business/shopActivity/updateShopActivity",method:"post",data:t})}function c(t){return Object(i.a)({url:"/sys/business/shopActivity/deleteShopActivity",method:"post",data:t})}function l(t){return Object(i.a)({url:"/sys/business/shopActivity/invalidShopActivity",method:"post",data:t})}function u(t){return Object(i.a)({url:"/sys/business/shopActivity/getShopActivityById",method:"post",data:t})}function d(t){return Object(i.a)({url:"/sys/business/shopActivity/getActivityProductListById",method:"post",data:t})}function p(t){return Object(i.a)({url:"/sys/business/shopActivity/getShopActivityListById",method:"post",data:t})}function h(t){return Object(i.a)({url:"/product/mall/active/findActiveAndProduct?activeId="+t.activeId+"&productIds="+t.ids,method:"get"})}},"819n":function(t,e,a){},"KZ+4":function(t,e,a){"use strict";a.r(e);var i=a("QbLZ"),s=a.n(i),n=a("L2JU"),o=a("lmFE"),r=a("2rhy"),c={data:function(){return{searchList:{tabType:"-1",pageNum:1,pageSize:5},category:[],list:[],listTotal:0,applicationTime:"",pickerOptions:{shortcuts:[{text:"今天",onClick:function(t){t.$emit("pick",new Date)}},{text:"昨天",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",e)}},{text:"一周前",onClick:function(t){var e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",e)}}]},extedShowForm:{},extendShow:!1,extendForm:{},extendFormLoading:!1,activeName:"h5"}},created:function(){this.searchList.shopId=this.shop.shopId,this.searchList.activityType=2,this.getData()},methods:{getData:function(){var t=this;this.searchList.activityStatus="-1"==this.searchList.tabType?"":this.searchList.tabType,console.log("请求的数据",this.searchList),Object(o.b)(this.searchList).then(function(e){console.log("砍价活动列表",e),200==e.code&&(t.list=e.data.list,t.listTotal=e.data.total)})},reset:function(){this.searchList.name="",this.searchList.beginActivityTime="",this.searchList.endActivityTime="",this.getData()},extendItem:function(t){this.extedShowForm.productId=t.productId,this.extedShowForm.shopId=this.shop.shopId,this.getExted()},getExted:function(){var t=this;this.extendFormLoading=!0,Object(o.a)(this.extedShowForm).then(function(e){console.log("推广",e),200==e.code?(t.extendForm=e.data,t.extendShow=!0):t.$message.error(e.message),setTimeout(function(){t.extendFormLoading=!1},500)})},downImg:function(){"h5"==this.activeName&&window.open(this.extendForm.bargainCodeUrl),"mini"==this.activeName&&window.open(this.extendForm.miniBargainCodeUrl)},failItem:function(t){var e=this;this.$confirm("确定让这组砍价活动失效吗？ 失效后，买家无法发起砍价活动；你也不能继续编辑活动内容；买家之前已发起的砍价活动，在有效期内还能继续邀请好友砍价。","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={id:t.id,userId:e.user.userId,shopId:e.shop.shopId,name:t.name};Object(r.i)(a).then(function(t){console.log("失效操作",t),200==t.code?(e.$message({type:"success",message:t.message}),e.getData()):e.$message.error(t.message)})}).catch(function(){})},deleteItem:function(t){var e=this;this.$confirm("确定删除此砍价活动?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(r.c)({id:t,userId:e.user.userId}).then(function(t){console.log("删除操作",t),200==t.code?(e.$message({type:"success",message:t.message}),e.getData()):e.$message.error(t.message)})}).catch(function(){})},handleSizeChange:function(t){console.log("每页 "+t+" 条"),this.searchList.pageSize=t,this.getData()},handleCurrentChange:function(t){console.log("当前页: "+t),this.searchList.pageNum=t,this.getData()}},computed:s()({},Object(n.c)(["user","shop"]))},l=(a("TxQC"),a("KHd+")),u=Object(l.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pageContent"},[a("el-card",{staticClass:"filter-container",attrs:{shadow:"never"}},[a("el-tabs",{on:{"tab-click":t.getData},model:{value:t.searchList.tabType,callback:function(e){t.$set(t.searchList,"tabType",e)},expression:"searchList.tabType"}},[a("el-tab-pane",{attrs:{label:"所有活动",name:"-1"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"未开始",name:"0"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"进行中",name:"1"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"已结束",name:"2"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"已失效",name:"3"}})],1),t._v(" "),a("div",[a("i",{staticClass:"el-icon-search"}),t._v(" "),a("span",[t._v("筛选搜索")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:t.getData}},[t._v("查询")]),t._v(" "),a("el-button",{staticStyle:{float:"right","margin-right":"15px"},attrs:{size:"small"},on:{click:t.reset}},[t._v("重置")])],1),t._v(" "),a("div",{staticStyle:{"margin-top":"15px"}},[a("el-form",{attrs:{inline:!0,model:t.searchList,size:"small","label-width":"140px"}},[a("el-form-item",{attrs:{label:"活动名称："}},[a("el-input",{staticStyle:{width:"203px"},attrs:{clearable:"",placeholder:"活动名称"},model:{value:t.searchList.name,callback:function(e){t.$set(t.searchList,"name",e)},expression:"searchList.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"开始日期："}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择开始时间",align:"right","picker-options":t.pickerOptions},model:{value:t.searchList.beginActivityTime,callback:function(e){t.$set(t.searchList,"beginActivityTime",e)},expression:"searchList.beginActivityTime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"结束日期："}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择结束时间",align:"right","picker-options":t.pickerOptions},model:{value:t.searchList.endActivityTime,callback:function(e){t.$set(t.searchList,"endActivityTime",e)},expression:"searchList.endActivityTime"}})],1)],1)],1)],1),t._v(" "),a("el-card",{staticClass:"operate-container",staticStyle:{"margin-top":"10px"},attrs:{shadow:"never"}},[a("div",{staticClass:"flex-row-between",staticStyle:{width:"100%"}},[a("div",[a("i",{staticClass:"el-icon-tickets"}),t._v(" "),a("span",[t._v("数据列表")])]),t._v(" "),a("div",{staticStyle:{"padding-right":"20px"}},[a("el-button",{attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:function(e){t.$router.push({path:"/marketManage/bargain/newBargain"})}}},[t._v("新增砍价活动")])],1)])]),t._v(" "),a("div",[a("el-card",{staticClass:"filter-container",staticStyle:{"margin-top":"20px"},attrs:{shadow:"never"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"活动名称",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{label:"活动时间",width:"450"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.beginActivityTime+" 至 "+e.row.endActivityTime)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"活动状态",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.activityStatus?a("div",{staticStyle:{color:"#E6A23C"}},[t._v("未开始")]):t._e(),t._v(" "),1==e.row.activityStatus?a("div",{staticStyle:{color:"#409EFF"}},[t._v("进行中")]):t._e(),t._v(" "),2==e.row.activityStatus?a("div",{staticStyle:{color:"#F56C6C"}},[t._v("已结束")]):t._e(),t._v(" "),3==e.row.activityStatus?a("div",{staticStyle:{color:"#F56C6C"}},[t._v("已失效")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"140"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("span",{attrs:{"data-scope":e.row}},[t._v("订单总金额")]),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"活动订单总付款金额（包含退款）",placement:"top-start"}},[a("i",{staticClass:"el-icon-question"})])]}},{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.orderAmount?e.row.orderAmount:"0")+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"140"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("span",{attrs:{"data-scope":e.row}},[t._v("付款订单数")]),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"参与活动并付款的订单（包含退款订单）",placement:"top-start"}},[a("i",{staticClass:"el-icon-question"})])]}},{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.orderTotal?e.row.orderTotal:"0")+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"140"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("span",{attrs:{"data-scope":e.row}},[t._v("付款人数")]),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"参与活动并付款的人数（包含退款人数）",placement:"top-start"}},[a("i",{staticClass:"el-icon-question"})])]}},{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.userTotal?e.row.userTotal:"0")+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"砍价人数",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.bargainUserTotal?e.row.bargainUserTotal:"0")+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"productTotal",label:"帮砍人数",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.helpUserTotal?e.row.helpUserTotal:"0")+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"140"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("span",{attrs:{"data-scope":e.row}},[t._v("砍价成功数")]),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"砍价成功的数量（包含砍价成功未付款数）",placement:"top-start"}},[a("i",{staticClass:"el-icon-question"})])]}},{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.bargainSuccessTotal?e.row.bargainSuccessTotal:"0")+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"140"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("span",{attrs:{"data-scope":e.row}},[t._v("活动库存")]),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"用户支付成功扣除活动库存，退货不增加活动库存",placement:"top-start"}},[a("i",{staticClass:"el-icon-question"})])]}},{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.lockStock)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.$router.push({path:"/marketManage/bargain/bargainInfo",query:{id:e.row.id}})}}},[t._v("查看")]),t._v(" "),1==e.row.activityStatus||0==e.row.activityStatus?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.$router.push({path:"/marketManage/bargain/editBargain",query:{id:e.row.id}})}}},[t._v("修改")]):t._e(),t._v(" "),1==e.row.activityStatus?a("el-button",{staticStyle:{color:"#F56C6C"},attrs:{type:"text",size:"small"},on:{click:function(a){t.failItem(e.row)}}},[t._v("使失效")]):t._e(),t._v(" "),1==e.row.activityStatus?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.extendItem(e.row)}}},[t._v("推广")]):t._e(),t._v(" "),0==e.row.activityStatus?a("el-button",{staticStyle:{color:"#F56C6C"},attrs:{type:"text",size:"small"},on:{click:function(a){t.deleteItem(e.row.id)}}},[t._v("删除")]):t._e()]}}])})],1),t._v(" "),a("div",{staticClass:"flex-row-end",staticStyle:{"padding-top":"20px"}},[a("div",[a("el-pagination",{attrs:{"page-sizes":[5,10,15,20],"page-size":t.searchList.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.listTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"砍价推广",visible:t.extendShow,width:"40%",center:""},on:{"update:visible":function(e){t.extendShow=e}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.extendFormLoading,expression:"extendFormLoading"}],ref:"form",attrs:{model:t.extendForm}},[a("div",{staticClass:"extend"},[a("el-tabs",{attrs:{"tab-position":"left"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"H5推广",name:"h5"}},[a("img",{staticStyle:{width:"375px",margin:"auto"},attrs:{src:t.extendForm.bargainCodeUrl,alt:""}})]),t._v(" "),a("el-tab-pane",{attrs:{disabled:2==t.extendForm.miniBargainStatus,label:"小程序推广",name:"mini"}},[a("img",{staticStyle:{width:"375px",margin:"auto"},attrs:{src:t.extendForm.miniBargainCodeUrl,alt:""}})])],1)],1)]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.getExted}},[t._v("重新生成")]),t._v(" "),a("el-button",{on:{click:t.downImg}},[t._v("下载推广图")])],1)],1)],1)},[],!1,null,"70fcb168",null);u.options.__file="bargain.vue";e.default=u.exports},TxQC:function(t,e,a){"use strict";var i=a("819n");a.n(i).a},lmFE:function(t,e,a){"use strict";a.d(e,"b",function(){return s}),a.d(e,"a",function(){return n}),a.d(e,"d",function(){return o}),a.d(e,"c",function(){return r});var i=a("t3Un");function s(t){return Object(i.a)({url:"/sys/business/shopActivity/getBargainActivityList",method:"post",data:t})}function n(t){return Object(i.a)({url:"/sys/business/shopActivity/getBargainActivityImg?shopId="+t.shopId+"&productId="+t.productId,method:"get"})}function o(t){return Object(i.a)({url:"/sys/business/shopActivity/getBargainSubgroupProductPage",method:"post",data:t})}function r(t){return Object(i.a)({url:"/sys/business/shopActivity/getBargainSubgroupInfo?bargainIds="+t,method:"get"})}}}]);
//# sourceMappingURL=chunk-16e6.3d849295.js.map