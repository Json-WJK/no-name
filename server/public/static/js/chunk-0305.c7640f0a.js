(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0305"],{FagV:function(t,e,o){"use strict";o.d(e,"a",function(){return s}),o.d(e,"d",function(){return l}),o.d(e,"b",function(){return i}),o.d(e,"c",function(){return r});var a=o("t3Un");function s(t){return Object(a.a)({url:"/product/business/stock/findByCondition",method:"post",data:t})}function l(t){return Object(a.a)({url:"/product/business/stock/updateStockInOut",method:"post",data:t})}function i(t){return Object(a.a)({url:"/product/business/stockRecord/findByCondition",method:"post",data:t})}function r(t){return Object(a.a)({url:"/product/business/stockRecord/findByDetailCondition",method:"post",data:t})}},GRx1:function(t,e,o){"use strict";o.r(e);var a=o("FagV"),s={data:function(){return{list:{goodName:"",goodId:"",goodCode:""},tableData:[],pageNum:1,page_size:15,total:0,options:[{value:"0",label:"出售中"},{value:"1",label:"下架"}],upStockStatusList:[{value:"0",label:"上货入库"},{value:"1",label:"退货入库"},{value:"2",label:"其他入库"}],outStockStatusList:[{value:"3",label:"销售出库"},{value:"4",label:"其他出库"}],dialogFormVisible:!1,updialogFormVisible:!1,outStock:{number:"",status:"",remark:"",productId:"",skuId:""},upStock:{number:"",status:"",remark:"",productId:"",skuId:""}}},created:function(){this.$route.query.beginStock&&(this.list.beginStock=this.$route.query.beginStock),this.$route.query.endStock&&(this.list.endStock=this.$route.query.endStock),this.searchList()},methods:{searchList:function(){var t=this;Object(a.a)({shopId:localStorage.getItem("shopId"),name:this.list.goodName,productCode:this.list.goodId,skuCode:this.list.goodCode,salesStatus:this.list.state,beginStock:this.list.beginStock||"",endStock:this.list.endStock||"",pageSize:this.page_size,pageNum:this.pageNum}).then(function(e){t.tableData=e.data.list,t.total=e.data.total})},reset:function(){this.list={goodName:"",goodId:"",goodCode:"",state:"",beginStock:void 0,endStock:void 0},this.searchList()},handleSizeChange:function(t){this.page_size=t,this.searchList()},pageChange:function(t){this.pageNum=t,this.searchList()},showProduct:function(t,e){this.dialogFormVisible=!0,this.outStock.productId=e.productId,this.outStock.skuId=e.code,this.outStock.total=e.usableStock},outStockButton:function(){var t=this;"number"==typeof this.outStock.number?this.outStock.number<=0?this.$notify.error({title:"错误",message:"请输入大于0的值"}):this.outStock.number>this.outStock.total?this.$notify.error({title:"错误",message:"出库量不能大于可用库存量"}):""!=this.outStock.status?Object(a.d)({shopId:localStorage.getItem("shopId"),productId:this.outStock.productId,skuId:this.outStock.skuId,type:this.outStock.status,totalStockChange:-this.outStock.number,remark:this.outStock.remark,creater:localStorage.getItem("userId")}).then(function(e){200==e.code?(t.$notify({title:"成功",message:"出库成功",type:"success"}),t.dialogFormVisible=!1,t.outStock.status="",t.outStock.skuId="",t.outStock.number="",t.outStock.remark="",t.searchList()):t.$notify.error({title:"失败",message:"出库失败"})}):this.$notify.error({title:"错误",message:"请选择出库类型"}):this.$notify.error({title:"错误",message:"请输入数字"})},updateProduct:function(t,e){this.updialogFormVisible=!0,this.upStock.productId=e.productId,this.upStock.skuId=e.code},upStockButton:function(){var t=this;"number"==typeof this.upStock.number?this.upStock.number<=0?this.$notify.error({title:"错误",message:"请输入大于0的值"}):""!=this.upStock.status?Object(a.d)({shopId:localStorage.getItem("shopId"),productId:this.upStock.productId,skuId:this.upStock.skuId,type:this.upStock.status,totalStockChange:this.upStock.number,remark:this.upStock.remark,creater:localStorage.getItem("userId")}).then(function(e){200==e.code?(t.$notify({title:"成功",message:"入库成功",type:"success"}),t.updialogFormVisible=!1,t.upStock.status="",t.upStock.skuId="",t.upStock.number="",t.upStock.remark="",t.searchList()):t.$notify.error({title:"失败",message:"入库失败"})}):this.$notify.error({title:"错误",message:"请选择入库类型"}):this.$notify.error({title:"错误",message:"请输入数字"})}}},l=(o("XwpN"),o("KHd+")),i=Object(l.a)(s,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"app-container"},[o("el-card",{staticClass:"operate-container",attrs:{shadow:"never"}},[o("div",[o("i",{staticClass:"el-icon-search"}),t._v(" "),o("span",[t._v("筛选搜索")]),t._v(" "),o("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:t.searchList}},[t._v("\n        查询\n      ")]),t._v(" "),o("el-button",{staticStyle:{float:"right","margin-right":"15px"},attrs:{size:"small"},on:{click:t.reset}},[t._v("\n        重置\n      ")])],1),t._v(" "),o("div",{staticStyle:{"margin-top":"40px"}},[o("el-form",{attrs:{inline:!0,model:t.list,size:"small","label-width":"140px"}},[o("el-form-item",{attrs:{label:"商品名称："}},[o("el-input",{staticStyle:{width:"203px"},attrs:{clearable:"",placeholder:"商品名称"},model:{value:t.list.goodName,callback:function(e){t.$set(t.list,"goodName",e)},expression:"list.goodName"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"商品编码："}},[o("el-input",{staticStyle:{width:"203px"},attrs:{clearable:"",placeholder:"商品编码"},model:{value:t.list.goodId,callback:function(e){t.$set(t.list,"goodId",e)},expression:"list.goodId"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"规格编码："}},[o("el-input",{staticStyle:{width:"203px"},attrs:{clearable:"",placeholder:"规格编码"},model:{value:t.list.goodCode,callback:function(e){t.$set(t.list,"goodCode",e)},expression:"list.goodCode"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"出售状态："}},[o("el-select",{attrs:{clearable:"",placeholder:"默认为全部"},model:{value:t.list.state,callback:function(e){t.$set(t.list,"state",e)},expression:"list.state"}},t._l(t.options,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"查询【可用库存】数量区间段",placement:"bottom"}},[o("el-form-item",{attrs:{label:"库存数量："}},[o("el-input-number",{attrs:{controls:!1,"step-strictly":"",placeholder:"最低"},model:{value:t.list.beginStock,callback:function(e){t.$set(t.list,"beginStock",e)},expression:"list.beginStock"}}),t._v("\n            -\n            "),o("el-input-number",{attrs:{controls:!1,"step-strictly":"",placeholder:"最高"},model:{value:t.list.endStock,callback:function(e){t.$set(t.list,"endStock",e)},expression:"list.endStock"}})],1)],1)],1)],1)]),t._v(" "),o("el-card",{staticClass:"operate-container",staticStyle:{"margin-top":"10px"},attrs:{shadow:"never"}},[o("i",{staticClass:"el-icon-tickets"}),t._v(" "),o("span",[t._v("数据列表")])]),t._v(" "),o("el-card",{staticClass:"operate-container",staticStyle:{"margin-top":"10px"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[o("el-table-column",{attrs:{type:"index",width:"50",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{label:"平台分类",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.categoryName3))]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"商品名称","min-width":"200","show-overflow-tooltip":"",prop:"name",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{label:"出售状态",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.salesStatus?o("el-tag",{attrs:{type:"success"}},[t._v("出售中")]):t._e(),t._v(" "),1==e.row.salesStatus?o("el-tag",{attrs:{type:"danger"}},[t._v("下架")]):t._e()]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"商品编码",width:"100",prop:"productCode",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{label:"规格编码",width:"140",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.skuCode?e.row.skuCode:"-"))]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"可用库存",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.usableStock)+"\n        ")]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"库存总数",width:"150",prop:"totalStock",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{label:"订单占用库存",width:"180",prop:"orderStock",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{label:"活动锁定库存",width:"150",prop:"lockStock",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{label:"操作",fixed:"right",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(o){t.showProduct(e.$index,e.row)}}},[t._v("出库\n          ")]),t._v(" "),o("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(o){t.updateProduct(e.$index,e.row)}}},[t._v("入库\n          ")])]}}])})],1)],1),t._v(" "),o("el-dialog",{attrs:{title:"出库",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[o("el-form",{attrs:{model:t.outStock,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"出库数量："}},[o("el-input",{staticStyle:{width:"200px"},model:{value:t.outStock.number,callback:function(e){t.$set(t.outStock,"number",t._n(e))},expression:"outStock.number"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"出库类型"}},[o("el-select",{attrs:{placeholder:"请选择出库类型："},model:{value:t.outStock.status,callback:function(e){t.$set(t.outStock,"status",e)},expression:"outStock.status"}},t._l(t.outStockStatusList,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),o("el-form-item",{attrs:{label:"备注："}},[o("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",maxlength:"50",autosize:{minRows:3,maxRows:4}},model:{value:t.outStock.remark,callback:function(e){t.$set(t.outStock,"remark",e)},expression:"outStock.remark"}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.outStockButton}},[t._v("确 定")])],1)],1),t._v(" "),o("el-dialog",{attrs:{title:"入库",visible:t.updialogFormVisible},on:{"update:visible":function(e){t.updialogFormVisible=e}}},[o("el-form",{attrs:{model:t.upStock,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"入库数量："}},[o("el-input",{staticStyle:{width:"200px"},model:{value:t.upStock.number,callback:function(e){t.$set(t.upStock,"number",t._n(e))},expression:"upStock.number"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"入库类型"}},[o("el-select",{attrs:{placeholder:"请选择入库类型："},model:{value:t.upStock.status,callback:function(e){t.$set(t.upStock,"status",e)},expression:"upStock.status"}},t._l(t.upStockStatusList,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),o("el-form-item",{attrs:{label:"备注："}},[o("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",maxlength:"50",autosize:{minRows:3,maxRows:4}},model:{value:t.upStock.remark,callback:function(e){t.$set(t.upStock,"remark",e)},expression:"upStock.remark"}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.updialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.upStockButton}},[t._v("确 定")])],1)],1),t._v(" "),o("div",{staticClass:"fixedB"},[o("el-pagination",{staticStyle:{"margin-top":"10px","margin-left":"20px"},attrs:{background:"",layout:"total,sizes,prev,pager,next,jumper","page-size":t.page_size,"page-sizes":[15,30,50,100],"current-page":t.pageNum,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.pageChange}})],1)],1)},[],!1,null,"0ffc1b5c",null);i.options.__file="index.vue";e.default=i.exports},NanR:function(t,e,o){},XwpN:function(t,e,o){"use strict";var a=o("NanR");o.n(a).a}}]);
//# sourceMappingURL=chunk-0305.c7640f0a.js.map